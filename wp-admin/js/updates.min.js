(()=>{var e,t,a,s,__,_x,_n,_nx,n;e=jQuery,t=window.wp,a=window._wpUpdatesSettings,s=e(document),__=t.i18n.__,_x=t.i18n._x,_n=t.i18n._n,_nx=t.i18n._nx,n=t.i18n.sprintf,(t=t||{}).updates={},t.updates.l10n={searchResults:"",searchResultsLabel:"",noPlugins:"",noItemsSelected:"",updating:"",pluginUpdated:"",themeUpdated:"",update:"",updateNow:"",pluginUpdateNowLabel:"",updateFailedShort:"",updateFailed:"",pluginUpdatingLabel:"",pluginUpdatedLabel:"",pluginUpdateFailedLabel:"",updatingMsg:"",updatedMsg:"",updateCancel:"",beforeunload:"",installNow:"",pluginInstallNowLabel:"",installing:"",pluginInstalled:"",themeInstalled:"",installFailedShort:"",installFailed:"",pluginInstallingLabel:"",themeInstallingLabel:"",pluginInstalledLabel:"",themeInstalledLabel:"",pluginInstallFailedLabel:"",themeInstallFailedLabel:"",installingMsg:"",installedMsg:"",importerInstalledMsg:"",aysDelete:"",aysDeleteUninstall:"",aysBulkDelete:"",aysBulkDeleteThemes:"",deleting:"",deleteFailed:"",pluginDeleted:"",themeDeleted:"",livePreview:"",activatePlugin:"",activateTheme:"",activatePluginLabel:"",activateThemeLabel:"",activateImporter:"",activateImporterLabel:"",unknownError:"",connectionError:"",nonceError:"",pluginsFound:"",noPluginsFound:"",autoUpdatesEnable:"",autoUpdatesEnabling:"",autoUpdatesEnabled:"",autoUpdatesDisable:"",autoUpdatesDisabling:"",autoUpdatesDisabled:"",autoUpdatesError:""},t.updates.l10n=window.wp.deprecateL10nObject("wp.updates.l10n",t.updates.l10n,"5.5.0"),t.updates.ajaxNonce=a.ajax_nonce,t.updates.searchTerm="",t.updates.searchMinCharacters=2,t.updates.shouldRequestFilesystemCredentials=!1,t.updates.filesystemCredentials={ftp:{host:"",username:"",password:"",connectionType:""},ssh:{publicKey:"",privateKey:""},fsNonce:"",available:!1},t.updates.ajaxLocked=!1,t.updates.adminNotice=t.template("wp-updates-admin-notice"),t.updates.queue=[],t.updates.$elToReturnFocusToFromCredentialsModal=void 0,t.updates.addAdminNotice=function(a){var n,i=e(a.selector),l=e(".wp-header-end");delete a.selector,n=t.updates.adminNotice(a),i.length||(i=e("#"+a.id)),i.length?i.replaceWith(n):l.length?l.after(n):"customize"===pagenow?e(".customize-themes-notifications").append(n):e(".wrap").find("> h1").after(n),s.trigger("wp-updates-notice-added")},t.updates.ajax=function(a,s){var n={};return t.updates.ajaxLocked?(t.updates.queue.push({action:a,data:s}),e.Deferred()):(t.updates.ajaxLocked=!0,s.success&&(n.success=s.success,delete s.success),s.error&&(n.error=s.error,delete s.error),n.data=_.extend(s,{action:a,_ajax_nonce:t.updates.ajaxNonce,_fs_nonce:t.updates.filesystemCredentials.fsNonce,username:t.updates.filesystemCredentials.ftp.username,password:t.updates.filesystemCredentials.ftp.password,hostname:t.updates.filesystemCredentials.ftp.hostname,connection_type:t.updates.filesystemCredentials.ftp.connectionType,public_key:t.updates.filesystemCredentials.ssh.publicKey,private_key:t.updates.filesystemCredentials.ssh.privateKey}),t.ajax.send(n).always(t.updates.ajaxAlways))},t.updates.ajaxAlways=function(e){e.errorCode&&"unable_to_connect_to_filesystem"===e.errorCode||(t.updates.ajaxLocked=!1,t.updates.queueChecker()),void 0!==e.debug&&window.console&&window.console.log&&_.map(e.debug,(function(e){window.console.log(t.sanitize.stripTagsAndEncodeText(e))}))},t.updates.refreshCount=function(){var t,s=e("#wp-admin-bar-updates"),i=e('a[href="update-core.php"] .update-plugins'),l=e('a[href="plugins.php"] .update-plugins'),d=e('a[href="themes.php"] .update-plugins');s.find(".ab-label").text(a.totals.counts.total),s.find(".updates-available-text").text(n(/* translators: %s: Total number of updates available. */
_n("%s update available","%s updates available",a.totals.counts.total),a.totals.counts.total)),0===a.totals.counts.total&&s.find(".ab-label").parents("li").remove(),i.each((function(e,t){t.className=t.className.replace(/count-\d+/,"count-"+a.totals.counts.total)})),a.totals.counts.total>0?i.find(".update-count").text(a.totals.counts.total):i.remove(),l.each((function(e,t){t.className=t.className.replace(/count-\d+/,"count-"+a.totals.counts.plugins)})),a.totals.counts.total>0?l.find(".plugin-count").text(a.totals.counts.plugins):l.remove(),d.each((function(e,t){t.className=t.className.replace(/count-\d+/,"count-"+a.totals.counts.themes)})),a.totals.counts.total>0?d.find(".theme-count").text(a.totals.counts.themes):d.remove(),"plugins"===pagenow||"plugins-network"===pagenow?t=a.totals.counts.plugins:"themes"!==pagenow&&"themes-network"!==pagenow||(t=a.totals.counts.themes),t>0?e(".subsubsub .upgrade .count").text("("+t+")"):(e(".subsubsub .upgrade").remove(),e(".subsubsub li:last").html((function(){return e(this).children()})))},t.updates.setCardButtonStatus=function(t){var a=window.parent===window?null:window.parent;e.support.postMessage=!!window.postMessage,!1!==e.support.postMessage&&null!==a&&-1===window.parent.location.pathname.indexOf("index.php")&&a.postMessage(JSON.stringify(t),window.location.origin)},t.updates.decrementCount=function(e){a.totals.counts.total=Math.max(--a.totals.counts.total,0),"plugin"===e?a.totals.counts.plugins=Math.max(--a.totals.counts.plugins,0):"theme"===e&&(a.totals.counts.themes=Math.max(--a.totals.counts.themes,0)),t.updates.refreshCount(e)},t.updates.updatePlugin=function(a){var i,l,d,u,o=e("#wp-admin-bar-updates"),r=__("Updating..."),p="plugin-install"===pagenow||"plugin-install-network"===pagenow;return a=_.extend({success:t.updates.updatePluginSuccess,error:t.updates.updatePluginError},a),"plugins"===pagenow||"plugins-network"===pagenow?(d=(i=e('tr[data-plugin="'+a.plugin+'"]')).find(".update-message").removeClass("notice-error").addClass("updating-message notice-warning").find("p"),u=n(/* translators: %s: Plugin name and version. */
_x("Updating %s...","plugin"),i.find(".plugin-title strong").text())):p&&(d=(l=e(".plugin-card-"+a.slug+", #plugin-information-footer")).find(".update-now").addClass("updating-message"),u=n(/* translators: %s: Plugin name and version. */
_x("Updating %s...","plugin"),d.data("name")),l.removeClass("plugin-card-update-failed").find(".notice.notice-error").remove()),o.addClass("spin"),d.html()!==__("Updating...")&&d.data("originaltext",d.html()),d.attr("aria-label",u).text(r),s.trigger("wp-plugin-updating",a),p&&"plugin-information-footer"===l.attr("id")&&t.updates.setCardButtonStatus({status:"updating-plugin",slug:a.slug,addClasses:"updating-message",text:r,ariaLabel:u}),t.updates.ajax("update-plugin",a)},t.updates.updatePluginSuccess=function(a){var i,l,d,u=e("#wp-admin-bar-updates"),o=_x("Updated!","plugin"),r=n(/* translators: %s: Plugin name and version. */
_x("%s updated!","plugin"),a.pluginName);"plugins"===pagenow||"plugins-network"===pagenow?(l=(i=e('tr[data-plugin="'+a.plugin+'"]').removeClass("update is-enqueued").addClass("updated")).find(".update-message").removeClass("updating-message notice-warning").addClass("updated-message notice-success").find("p"),d=i.find(".plugin-version-author-uri").html().replace(a.oldVersion,a.newVersion),i.find(".plugin-version-author-uri").html(d),i.find(".auto-update-time").empty()):"plugin-install"!==pagenow&&"plugin-install-network"!==pagenow||(l=e(".plugin-card-"+a.slug+", #plugin-information-footer").find(".update-now").removeClass("updating-message").addClass("button-disabled updated-message")),u.removeClass("spin"),l.attr("aria-label",r).text(o),t.a11y.speak(__("Update completed successfully.")),"plugin_install_from_iframe"!==l.attr("id")?t.updates.decrementCount("plugin"):t.updates.setCardButtonStatus({status:"updated-plugin",slug:a.slug,removeClasses:"updating-message",addClasses:"button-disabled updated-message",text:o,ariaLabel:r}),s.trigger("wp-plugin-update-success",a)},t.updates.updatePluginError=function(a){var i,l,d,u,o,r=e("#wp-admin-bar-updates");t.updates.isValidResponse(a,"update")&&(t.updates.maybeHandleCredentialError(a,"update-plugin")||(d=n(/* translators: %s: Error string for a failed update. */
__("Update failed: %s"),a.errorMessage),"plugins"===pagenow||"plugins-network"===pagenow?(e('tr[data-plugin="'+a.plugin+'"]').removeClass("is-enqueued"),(l=a.plugin?e('tr[data-plugin="'+a.plugin+'"]').find(".update-message"):e('tr[data-slug="'+a.slug+'"]').find(".update-message")).removeClass("updating-message notice-warning").addClass("notice-error").find("p").html(d),a.pluginName?l.find("p").attr("aria-label",n(/* translators: %s: Plugin name and version. */
_x("%s update failed.","plugin"),a.pluginName)):l.find("p").removeAttr("aria-label")):"plugin-install"!==pagenow&&"plugin-install-network"!==pagenow||(u=__("Update failed."),(i=e(".plugin-card-"+a.slug+", #plugin-information-footer").append(t.updates.adminNotice({className:"update-message notice-error notice-alt is-dismissible",message:d}))).hasClass("plugin-card-"+a.slug)&&i.addClass("plugin-card-update-failed"),i.find(".update-now").text(u).removeClass("updating-message"),a.pluginName?(o=n(/* translators: %s: Plugin name and version. */
_x("%s update failed.","plugin"),a.pluginName),i.find(".update-now").attr("aria-label",o)):(o="",i.find(".update-now").removeAttr("aria-label")),i.on("click",".notice.is-dismissible .notice-dismiss",(function(){setTimeout((function(){i.removeClass("plugin-card-update-failed").find(".column-name a").trigger("focus"),i.find(".update-now").attr("aria-label",!1).text(__("Update Now"))}),200)}))),r.removeClass("spin"),t.a11y.speak(d,"assertive"),"plugin-information-footer"===i.attr("id")&&t.updates.setCardButtonStatus({status:"plugin-update-failed",slug:a.slug,removeClasses:"updating-message",text:u,ariaLabel:o}),s.trigger("wp-plugin-update-error",a)))},t.updates.installPlugin=function(a){var i,l=e(".plugin-card-"+a.slug+", #plugin-information-footer"),d=l.find(".install-now"),u=__("Installing...");return a=_.extend({success:t.updates.installPluginSuccess,error:t.updates.installPluginError},a),"import"===pagenow&&(d=e('[data-slug="'+a.slug+'"]')),d.html()!==__("Installing...")&&d.data("originaltext",d.html()),i=n(/* translators: %s: Plugin name and version. */
_x("Installing %s...","plugin"),d.data("name")),d.addClass("updating-message").attr("aria-label",i).text(u),t.a11y.speak(__("Installing... please wait.")),l.removeClass("plugin-card-install-failed").find(".notice.notice-error").remove(),s.trigger("wp-plugin-installing",a),"plugin-information-footer"===d.parent().attr("id")&&t.updates.setCardButtonStatus({status:"installing-plugin",slug:a.slug,addClasses:"updating-message",text:u,ariaLabel:i}),t.updates.ajax("install-plugin",a)},t.updates.installPluginSuccess=function(a){var i=e(".plugin-card-"+a.slug+", #plugin-information-footer").find(".install-now"),l=_x("Installed!","plugin"),d=n(/* translators: %s: Plugin name and version. */
_x("%s installed!","plugin"),a.pluginName);i.removeClass("updating-message").addClass("updated-message installed button-disabled").attr("aria-label",d).text(l),t.a11y.speak(__("Installation completed successfully.")),s.trigger("wp-plugin-install-success",a),a.activateUrl&&setTimeout((function(){t.updates.checkPluginDependencies({slug:a.slug})}),1e3),"plugin-information-footer"===i.parent().attr("id")&&t.updates.setCardButtonStatus({status:"installed-plugin",slug:a.slug,removeClasses:"updating-message",addClasses:"updated-message installed button-disabled",text:l,ariaLabel:d})},t.updates.installPluginError=function(a){var i,l=e(".plugin-card-"+a.slug+", #plugin-information-footer"),d=l.find(".install-now"),u=__("Installation failed."),o=n(/* translators: %s: Plugin name and version. */
_x("%s installation failed","plugin"),d.data("name"));t.updates.isValidResponse(a,"install")&&(t.updates.maybeHandleCredentialError(a,"install-plugin")||(i=n(/* translators: %s: Error string for a failed installation. */
__("Installation failed: %s"),a.errorMessage),l.addClass("plugin-card-update-failed").append('<div class="notice notice-error notice-alt is-dismissible" role="alert"><p>'+i+"</p></div>"),l.on("click",".notice.is-dismissible .notice-dismiss",(function(){setTimeout((function(){l.removeClass("plugin-card-update-failed").find(".column-name a").trigger("focus")}),200)})),d.removeClass("updating-message").addClass("button-disabled").attr("aria-label",o).text(u),t.a11y.speak(i,"assertive"),t.updates.setCardButtonStatus({status:"plugin-install-failed",slug:a.slug,removeClasses:"updating-message",addClasses:"button-disabled",text:u,ariaLabel:o}),s.trigger("wp-plugin-install-error",a)))},t.updates.checkPluginDependencies=function(e){return e=_.extend({success:t.updates.checkPluginDependenciesSuccess,error:t.updates.checkPluginDependenciesError},e),t.a11y.speak(__("Checking plugin dependencies... please wait.")),s.trigger("wp-checking-plugin-dependencies",e),t.updates.ajax("check_plugin_dependencies",e)},t.updates.checkPluginDependenciesSuccess=function(a){var i,l,d=e(".plugin-card-"+a.slug+", #plugin-information-footer").find(".install-now");d.removeClass("install-now installed button-disabled updated-message").addClass("activate-now button-primary").attr("href",a.activateUrl),t.a11y.speak(__("Plugin dependencies check completed successfully.")),s.trigger("wp-check-plugin-dependencies-success",a),"plugins-network"===pagenow?(i=_x("Network Activate","plugin"),l=n(/* translators: %s: Plugin name. */
_x("Network Activate %s","plugin"),a.pluginName),d.attr("aria-label",l).text(i)):(i=_x("Activate","plugin"),l=n(/* translators: %s: Plugin name. */
_x("Activate %s","plugin"),a.pluginName),d.attr("aria-label",l).attr("data-name",a.pluginName).attr("data-slug",a.slug).attr("data-plugin",a.plugin).text(i)),"plugin-information-footer"===d.parent().attr("id")&&t.updates.setCardButtonStatus({status:"dependencies-check-success",slug:a.slug,removeClasses:"install-now installed button-disabled updated-message",addClasses:"activate-now button-primary",text:i,ariaLabel:l,pluginName:a.pluginName,plugin:a.plugin,href:a.activateUrl})},t.updates.checkPluginDependenciesError=function(a){var i,l=e(".plugin-card-"+a.slug+", #plugin-information-footer").find(".install-now"),d=_x("Activate","plugin"),u=n(/* translators: 1: Plugin name, 2. The reason the plugin cannot be activated. */
_x("Cannot activate %1$s. %2$s","plugin"),a.pluginName,a.errorMessage);t.updates.isValidResponse(a,"check-dependencies")&&(i=n(/* translators: %s: Error string for a failed activation. */
__("Activation failed: %s"),a.errorMessage),t.a11y.speak(i,"assertive"),s.trigger("wp-check-plugin-dependencies-error",a),l.removeClass("install-now installed updated-message").addClass("activate-now button-primary").attr("aria-label",u).text(d),"plugin-information-footer"===l.parent().attr("id")&&t.updates.setCardButtonStatus({status:"dependencies-check-failed",slug:a.slug,removeClasses:"install-now installed updated-message",addClasses:"activate-now button-primary",text:d,ariaLabel:u}))},t.updates.activatePlugin=function(a){var i=e(".plugin-card-"+a.slug+", #plugin-information-footer").find(".activate-now, .activating-message");return a=_.extend({success:t.updates.activatePluginSuccess,error:t.updates.activatePluginError},a),t.a11y.speak(__("Activating... please wait.")),s.trigger("wp-activating-plugin",a),"plugin-information-footer"===i.parent().attr("id")&&t.updates.setCardButtonStatus({status:"activating-plugin",slug:a.slug,removeClasses:"installed updated-message button-primary",addClasses:"activating-message",text:__("Activating..."),ariaLabel:n(/* translators: %s: Plugin name. */
_x("Activating %s","plugin"),a.name)}),t.updates.ajax("activate-plugin",a)},t.updates.activatePluginSuccess=function(a){var i=e(".plugin-card-"+a.slug+", #plugin-information-footer").find(".activating-message"),l=_x("Activated!","plugin"),d=n(/* translators: %s: The plugin name. */
"%s activated successfully.",a.pluginName);t.a11y.speak(__("Activation completed successfully.")),s.trigger("wp-plugin-activate-success",a),i.removeClass("activating-message").addClass("activated-message button-disabled").attr("aria-label",d).text(l),"plugin-information-footer"===i.parent().attr("id")&&t.updates.setCardButtonStatus({status:"activated-plugin",slug:a.slug,removeClasses:"activating-message",addClasses:"activated-message button-disabled",text:l,ariaLabel:d}),setTimeout((function(){i.removeClass("activated-message").text(_x("Active","plugin")),"plugin-information-footer"===i.parent().attr("id")&&t.updates.setCardButtonStatus({status:"plugin-active",slug:a.slug,removeClasses:"activated-message",text:_x("Active","plugin"),ariaLabel:n(/* translators: %s: The plugin name. */
"%s is active.",a.pluginName)})}),1e3)},t.updates.activatePluginError=function(a){var i,l=e(".plugin-card-"+a.slug+", #plugin-information-footer").find(".activating-message"),d=__("Activation failed."),u=n(/* translators: %s: Plugin name. */
_x("%s activation failed","plugin"),a.pluginName);t.updates.isValidResponse(a,"activate")&&(i=n(/* translators: %s: Error string for a failed activation. */
__("Activation failed: %s"),a.errorMessage),t.a11y.speak(i,"assertive"),s.trigger("wp-plugin-activate-error",a),l.removeClass("install-now installed activating-message").addClass("button-disabled").attr("aria-label",u).text(d),"plugin-information-footer"===l.parent().attr("id")&&t.updates.setCardButtonStatus({status:"plugin-activation-failed",slug:a.slug,removeClasses:"install-now installed activating-message",addClasses:"button-disabled",text:d,ariaLabel:u}))},t.updates.installImporterSuccess=function(a){t.updates.addAdminNotice({id:"install-success",className:"notice-success is-dismissible",message:n(/* translators: %s: Activation URL. */
__('Importer installed successfully. <a href="%s">Run importer</a>'),a.activateUrl+"&from=import")}),e('[data-slug="'+a.slug+'"]').removeClass("install-now updating-message").addClass("activate-now").attr({href:a.activateUrl+"&from=import","aria-label":n(/* translators: %s: Importer name. */
__("Run %s"),a.pluginName)}).text(__("Run Importer")),t.a11y.speak(__("Installation completed successfully.")),s.trigger("wp-importer-install-success",a)},t.updates.installImporterError=function(a){var i=n(/* translators: %s: Error string for a failed installation. */
__("Installation failed: %s"),a.errorMessage),l=e('[data-slug="'+a.slug+'"]'),d=l.data("name");t.updates.isValidResponse(a,"install")&&(t.updates.maybeHandleCredentialError(a,"install-plugin")||(t.updates.addAdminNotice({id:a.errorCode,className:"notice-error is-dismissible",message:i}),l.removeClass("updating-message").attr("aria-label",n(/* translators: %s: Plugin name. */
_x("Install %s now","plugin"),d)).text(_x("Install Now","plugin")),t.a11y.speak(i,"assertive"),s.trigger("wp-importer-install-error",a)))},t.updates.deletePlugin=function(a){var n=e('[data-plugin="'+a.plugin+'"]').find(".row-actions a.delete");return a=_.extend({success:t.updates.deletePluginSuccess,error:t.updates.deletePluginError},a),n.html()!==__("Deleting...")&&n.data("originaltext",n.html()).text(__("Deleting...")),t.a11y.speak(__("Deleting...")),s.trigger("wp-plugin-deleting",a),t.updates.ajax("delete-plugin",a)},t.updates.deletePluginSuccess=function(i){e('[data-plugin="'+i.plugin+'"]').css({backgroundColor:"#faafaa"}).fadeOut(350,(function(){var s,l=e("#bulk-action-form"),d=e(".subsubsub"),u=e(this),o=d.find('[aria-current="page"]'),r=e(".displaying-num"),p=l.find("thead th:not(.hidden), thead td").length,c=t.template("item-deleted-row"),g=a.plugins;u.hasClass("plugin-update-tr")||u.after(c({slug:i.slug,plugin:i.plugin,colspan:p,name:i.pluginName})),u.remove(),-1!==_.indexOf(g.upgrade,i.plugin)&&(g.upgrade=_.without(g.upgrade,i.plugin),t.updates.decrementCount("plugin")),-1!==_.indexOf(g.inactive,i.plugin)&&(g.inactive=_.without(g.inactive,i.plugin),g.inactive.length?d.find(".inactive .count").text("("+g.inactive.length+")"):d.find(".inactive").remove()),-1!==_.indexOf(g.active,i.plugin)&&(g.active=_.without(g.active,i.plugin),g.active.length?d.find(".active .count").text("("+g.active.length+")"):d.find(".active").remove()),-1!==_.indexOf(g.recently_activated,i.plugin)&&(g.recently_activated=_.without(g.recently_activated,i.plugin),g.recently_activated.length?d.find(".recently_activated .count").text("("+g.recently_activated.length+")"):d.find(".recently_activated").remove()),-1!==_.indexOf(g["auto-update-enabled"],i.plugin)&&(g["auto-update-enabled"]=_.without(g["auto-update-enabled"],i.plugin),g["auto-update-enabled"].length?d.find(".auto-update-enabled .count").text("("+g["auto-update-enabled"].length+")"):d.find(".auto-update-enabled").remove()),-1!==_.indexOf(g["auto-update-disabled"],i.plugin)&&(g["auto-update-disabled"]=_.without(g["auto-update-disabled"],i.plugin),g["auto-update-disabled"].length?d.find(".auto-update-disabled .count").text("("+g["auto-update-disabled"].length+")"):d.find(".auto-update-disabled").remove()),g.all=_.without(g.all,i.plugin),g.all.length?d.find(".all .count").text("("+g.all.length+")"):(l.find(".tablenav").css({visibility:"hidden"}),d.find(".all").remove(),l.find("tr.no-items").length||l.find("#the-list").append('<tr class="no-items"><td class="colspanchange" colspan="'+p+'">'+__("No plugins are currently available.")+"</td></tr>")),r.length&&o.length&&(s=g[o.parent("li").attr("class")].length,r.text(n(/* translators: %s: The remaining number of plugins. */
_nx("%s item","%s items",s,"plugin/plugins"),s)))})),t.a11y.speak(_x("Deleted!","plugin")),s.trigger("wp-plugin-delete-success",i)},t.updates.deletePluginError=function(a){var n,i,l=t.template("item-update-row"),d=t.updates.adminNotice({className:"update-message notice-error notice-alt",message:a.errorMessage});i=a.plugin?(n=e('tr.inactive[data-plugin="'+a.plugin+'"]')).siblings('[data-plugin="'+a.plugin+'"]'):(n=e('tr.inactive[data-slug="'+a.slug+'"]')).siblings('[data-slug="'+a.slug+'"]'),t.updates.isValidResponse(a,"delete")&&(t.updates.maybeHandleCredentialError(a,"delete-plugin")||(i.length?(i.find(".notice-error").remove(),i.find(".plugin-update").append(d)):n.addClass("update").after(l({slug:a.slug,plugin:a.plugin||a.slug,colspan:e("#bulk-action-form").find("thead th:not(.hidden), thead td").length,content:d})),s.trigger("wp-plugin-delete-error",a)))},t.updates.updateTheme=function(a){var n;return a=_.extend({success:t.updates.updateThemeSuccess,error:t.updates.updateThemeError},a),"themes-network"===pagenow?n=e('[data-slug="'+a.slug+'"]').find(".update-message").removeClass("notice-error").addClass("updating-message notice-warning").find("p"):"customize"===pagenow?((n=e('[data-slug="'+a.slug+'"].notice').removeClass("notice-large")).find("h3").remove(),n=(n=n.add(e("#customize-control-installed_theme_"+a.slug).find(".update-message"))).addClass("updating-message").find("p")):((n=e("#update-theme").closest(".notice").removeClass("notice-large")).find("h3").remove(),n=(n=n.add(e('[data-slug="'+a.slug+'"]').find(".update-message"))).addClass("updating-message").find("p")),n.html()!==__("Updating...")&&n.data("originaltext",n.html()),t.a11y.speak(__("Updating... please wait.")),n.text(__("Updating...")),s.trigger("wp-theme-updating",a),t.updates.ajax("update-theme",a)},t.updates.updateThemeSuccess=function(a){var n,i,l=e("body.modal-open").length,d=e('[data-slug="'+a.slug+'"]'),u={className:"updated-message notice-success notice-alt",message:_x("Updated!","theme")};"customize"===pagenow?((d=e(".updating-message").siblings(".theme-name")).length&&(i=d.html().replace(a.oldVersion,a.newVersion),d.html(i)),n=e(".theme-info .notice").add(t.customize.control("installed_theme_"+a.slug).container.find(".theme").find(".update-message"))):"themes-network"===pagenow?(n=d.find(".update-message"),i=d.find(".theme-version-author-uri").html().replace(a.oldVersion,a.newVersion),d.find(".theme-version-author-uri").html(i),d.find(".auto-update-time").empty()):(n=e(".theme-info .notice").add(d.find(".update-message")),l?(e(".load-customize:visible").trigger("focus"),e(".theme-info .theme-autoupdate").find(".auto-update-time").empty()):d.find(".load-customize").trigger("focus")),t.updates.addAdminNotice(_.extend({selector:n},u)),t.a11y.speak(__("Update completed successfully.")),t.updates.decrementCount("theme"),s.trigger("wp-theme-update-success",a),l&&"customize"!==pagenow&&e(".theme-info .theme-author").after(t.updates.adminNotice(u))},t.updates.updateThemeError=function(a){var i,l=e('[data-slug="'+a.slug+'"]'),d=n(/* translators: %s: Error string for a failed update. */
__("Update failed: %s"),a.errorMessage);t.updates.isValidResponse(a,"update")&&(t.updates.maybeHandleCredentialError(a,"update-theme")||("customize"===pagenow&&(l=t.customize.control("installed_theme_"+a.slug).container.find(".theme")),"themes-network"===pagenow?i=l.find(".update-message "):(i=e(".theme-info .notice").add(l.find(".notice")),e("body.modal-open").length?e(".load-customize:visible").trigger("focus"):l.find(".load-customize").trigger("focus")),t.updates.addAdminNotice({selector:i,className:"update-message notice-error notice-alt is-dismissible",message:d}),t.a11y.speak(d),s.trigger("wp-theme-update-error",a)))},t.updates.installTheme=function(a){var i=e('.theme-install[data-slug="'+a.slug+'"]');return a=_.extend({success:t.updates.installThemeSuccess,error:t.updates.installThemeError},a),i.addClass("updating-message"),i.parents(".theme").addClass("focus"),i.html()!==__("Installing...")&&i.data("originaltext",i.html()),i.attr("aria-label",n(/* translators: %s: Theme name and version. */
_x("Installing %s...","theme"),i.data("name"))).text(__("Installing...")),t.a11y.speak(__("Installing... please wait.")),e('.install-theme-info, [data-slug="'+a.slug+'"]').removeClass("theme-install-failed").find(".notice.notice-error").remove(),s.trigger("wp-theme-installing",a),t.updates.ajax("install-theme",a)},t.updates.installThemeSuccess=function(a){var i,l=e(".wp-full-overlay-header, [data-slug="+a.slug+"]");s.trigger("wp-theme-install-success",a),i=l.find(".button-primary").removeClass("updating-message").addClass("updated-message disabled").attr("aria-label",n(/* translators: %s: Theme name and version. */
_x("%s installed!","theme"),a.themeName)).text(_x("Installed!","theme")),t.a11y.speak(__("Installation completed successfully.")),setTimeout((function(){a.activateUrl&&(i.attr("href",a.activateUrl).removeClass("theme-install updated-message disabled").addClass("activate"),"themes-network"===pagenow?i.attr("aria-label",n(/* translators: %s: Theme name. */
_x("Network Activate %s","theme"),a.themeName)).text(__("Network Enable")):i.attr("aria-label",n(/* translators: %s: Theme name. */
_x("Activate %s","theme"),a.themeName)).text(_x("Activate","theme"))),a.customizeUrl&&i.siblings(".preview").replaceWith((function(){return e("<a>").attr("href",a.customizeUrl).addClass("button load-customize").text(__("Live Preview"))}))}),1e3)},t.updates.installThemeError=function(a){var i,l=n(/* translators: %s: Error string for a failed installation. */
__("Installation failed: %s"),a.errorMessage),d=t.updates.adminNotice({className:"update-message notice-error notice-alt",message:l});t.updates.isValidResponse(a,"install")&&(t.updates.maybeHandleCredentialError(a,"install-theme")||("customize"===pagenow?(s.find("body").hasClass("modal-open")?(i=e('.theme-install[data-slug="'+a.slug+'"]'),e(".theme-overlay .theme-info").prepend(d)):(i=e('.theme-install[data-slug="'+a.slug+'"]')).closest(".theme").addClass("theme-install-failed").append(d),t.customize.notifications.remove("theme_installing")):s.find("body").hasClass("full-overlay-active")?(i=e('.theme-install[data-slug="'+a.slug+'"]'),e(".install-theme-info").prepend(d)):i=e('[data-slug="'+a.slug+'"]').removeClass("focus").addClass("theme-install-failed").append(d).find(".theme-install"),i.removeClass("updating-message").attr("aria-label",n(/* translators: %s: Theme name and version. */
_x("%s installation failed","theme"),i.data("name"))).text(__("Installation failed.")),t.a11y.speak(l,"assertive"),s.trigger("wp-theme-install-error",a)))},t.updates.deleteTheme=function(a){var n;return"themes"===pagenow?n=e(".theme-actions .delete-theme"):"themes-network"===pagenow&&(n=e('[data-slug="'+a.slug+'"]').find(".row-actions a.delete")),a=_.extend({success:t.updates.deleteThemeSuccess,error:t.updates.deleteThemeError},a),n&&n.html()!==__("Deleting...")&&n.data("originaltext",n.html()).text(__("Deleting...")),t.a11y.speak(__("Deleting...")),e(".theme-info .update-message").remove(),s.trigger("wp-theme-deleting",a),t.updates.ajax("delete-theme",a)},t.updates.deleteThemeSuccess=function(n){var i=e('[data-slug="'+n.slug+'"]');"themes-network"===pagenow&&i.css({backgroundColor:"#faafaa"}).fadeOut(350,(function(){var s=e(".subsubsub"),i=e(this),l=a.themes,d=t.template("item-deleted-row");i.hasClass("plugin-update-tr")||i.after(d({slug:n.slug,colspan:e("#bulk-action-form").find("thead th:not(.hidden), thead td").length,name:i.find(".theme-title strong").text()})),i.remove(),-1!==_.indexOf(l.upgrade,n.slug)&&(l.upgrade=_.without(l.upgrade,n.slug),t.updates.decrementCount("theme")),-1!==_.indexOf(l.disabled,n.slug)&&(l.disabled=_.without(l.disabled,n.slug),l.disabled.length?s.find(".disabled .count").text("("+l.disabled.length+")"):s.find(".disabled").remove()),-1!==_.indexOf(l["auto-update-enabled"],n.slug)&&(l["auto-update-enabled"]=_.without(l["auto-update-enabled"],n.slug),l["auto-update-enabled"].length?s.find(".auto-update-enabled .count").text("("+l["auto-update-enabled"].length+")"):s.find(".auto-update-enabled").remove()),-1!==_.indexOf(l["auto-update-disabled"],n.slug)&&(l["auto-update-disabled"]=_.without(l["auto-update-disabled"],n.slug),l["auto-update-disabled"].length?s.find(".auto-update-disabled .count").text("("+l["auto-update-disabled"].length+")"):s.find(".auto-update-disabled").remove()),l.all=_.without(l.all,n.slug),s.find(".all .count").text("("+l.all.length+")")})),"themes"===pagenow&&_.find(_wpThemeSettings.themes,{id:n.slug}).hasUpdate&&t.updates.decrementCount("theme"),t.a11y.speak(_x("Deleted!","theme")),s.trigger("wp-theme-delete-success",n)},t.updates.deleteThemeError=function(a){var i=e('tr.inactive[data-slug="'+a.slug+'"]'),l=e(".theme-actions .delete-theme"),d=t.template("item-update-row"),u=i.siblings("#"+a.slug+"-update"),o=n(/* translators: %s: Error string for a failed deletion. */
__("Deletion failed: %s"),a.errorMessage),r=t.updates.adminNotice({className:"update-message notice-error notice-alt",message:o});t.updates.maybeHandleCredentialError(a,"delete-theme")||("themes-network"===pagenow?u.length?(u.find(".notice-error").remove(),u.find(".plugin-update").append(r)):i.addClass("update").after(d({slug:a.slug,colspan:e("#bulk-action-form").find("thead th:not(.hidden), thead td").length,content:r})):e(".theme-info .theme-description").before(r),l.html(l.data("originaltext")),t.a11y.speak(o,"assertive"),s.trigger("wp-theme-delete-error",a))},t.updates._addCallbacks=function(e,a){return"import"===pagenow&&"install-plugin"===a&&(e.success=t.updates.installImporterSuccess,e.error=t.updates.installImporterError),e},t.updates.queueChecker=function(){var e;if(!t.updates.ajaxLocked&&t.updates.queue.length)switch((e=t.updates.queue.shift()).action){case"install-plugin":t.updates.installPlugin(e.data);break;case"update-plugin":t.updates.updatePlugin(e.data);break;case"delete-plugin":t.updates.deletePlugin(e.data);break;case"install-theme":t.updates.installTheme(e.data);break;case"update-theme":t.updates.updateTheme(e.data);break;case"delete-theme":t.updates.deleteTheme(e.data)}},t.updates.requestFilesystemCredentials=function(a){!1===t.updates.filesystemCredentials.available&&(a&&!t.updates.$elToReturnFocusToFromCredentialsModal&&(t.updates.$elToReturnFocusToFromCredentialsModal=e(a.target)),t.updates.ajaxLocked=!0,t.updates.requestForCredentialsModalOpen())},t.updates.maybeRequestFilesystemCredentials=function(e){t.updates.shouldRequestFilesystemCredentials&&!t.updates.ajaxLocked&&t.updates.requestFilesystemCredentials(e)},t.updates.keydown=function(a){27===a.keyCode?t.updates.requestForCredentialsModalCancel():9===a.keyCode&&("upgrade"!==a.target.id||a.shiftKey?"hostname"===a.target.id&&a.shiftKey&&(e("#upgrade").trigger("focus"),a.preventDefault()):(e("#hostname").trigger("focus"),a.preventDefault()))},t.updates.requestForCredentialsModalOpen=function(){var a=e("#request-filesystem-credentials-dialog");e("body").addClass("modal-open"),a.show(),a.find("input:enabled:first").trigger("focus"),a.on("keydown",t.updates.keydown)},t.updates.requestForCredentialsModalClose=function(){e("#request-filesystem-credentials-dialog").hide(),e("body").removeClass("modal-open"),t.updates.$elToReturnFocusToFromCredentialsModal&&t.updates.$elToReturnFocusToFromCredentialsModal.trigger("focus")},t.updates.requestForCredentialsModalCancel=function(){(t.updates.ajaxLocked||t.updates.queue.length)&&(_.each(t.updates.queue,(function(e){s.trigger("credential-modal-cancel",e)})),t.updates.ajaxLocked=!1,t.updates.queue=[],t.updates.requestForCredentialsModalClose())},t.updates.showErrorInCredentialsForm=function(t){var a=e("#request-filesystem-credentials-form");a.find(".notice").remove(),a.find("#request-filesystem-credentials-title").after('<div class="notice notice-alt notice-error" role="alert"><p>'+t+"</p></div>")},t.updates.credentialError=function(e,a){e=t.updates._addCallbacks(e,a),t.updates.queue.unshift({action:a,data:e}),t.updates.filesystemCredentials.available=!1,t.updates.showErrorInCredentialsForm(e.errorMessage),t.updates.requestFilesystemCredentials()},t.updates.maybeHandleCredentialError=function(e,a){return!(!t.updates.shouldRequestFilesystemCredentials||!e.errorCode||"unable_to_connect_to_filesystem"!==e.errorCode||(t.updates.credentialError(e,a),0))},t.updates.isValidResponse=function(a,s){var n,i=__("Something went wrong.");if(_.isObject(a)&&!_.isFunction(a.always))return!0;switch(_.isString(a)&&"-1"===a?i=__("An error has occurred. Please reload the page and try again."):_.isString(a)?i=a:void 0!==a.readyState&&0===a.readyState?i=__("Connection lost or the server is busy. Please try again later."):_.isString(a.responseText)&&""!==a.responseText?i=a.responseText:_.isString(a.statusText)&&(i=a.statusText),s){case"update":
/* translators: %s: Error string for a failed update. */
n=__("Update failed: %s");break;case"install":
/* translators: %s: Error string for a failed installation. */
n=__("Installation failed: %s");break;case"check-dependencies":
/* translators: %s: Error string for a failed dependencies check. */
n=__("Dependencies check failed: %s");break;case"activate":
/* translators: %s: Error string for a failed activation. */
n=__("Activation failed: %s");break;case"delete":
/* translators: %s: Error string for a failed deletion. */
n=__("Deletion failed: %s")}return i=i.replace(/<[\/a-z][^<>]*>/gi,""),n=n.replace("%s",i),t.updates.addAdminNotice({id:"unknown_error",className:"notice-error is-dismissible",message:_.escape(n)}),t.updates.ajaxLocked=!1,t.updates.queue=[],e(".button.updating-message").removeClass("updating-message").removeAttr("aria-label").prop("disabled",!0).text(__("Update failed.")),e(".updating-message:not(.button):not(.thickbox)").removeClass("updating-message notice-warning").addClass("notice-error").find("p").removeAttr("aria-label").text(n),t.a11y.speak(n,"assertive"),!1},t.updates.beforeunload=function(){if(t.updates.ajaxLocked)return __("Updates may not complete if you navigate away from this page.")},e((function(){var i=e("#plugin-filter, #plugin-information-footer"),l=e("#bulk-action-form"),d=e("#request-filesystem-credentials-form"),u=e("#request-filesystem-credentials-dialog"),o=e(".plugins-php .wp-filter-search"),r=e(".plugin-install-php .wp-filter-search");(a=_.extend(a,window._wpUpdatesItemCounts||{})).totals&&t.updates.refreshCount(),t.updates.shouldRequestFilesystemCredentials=u.length>0,u.on("submit","form",(function(a){a.preventDefault(),t.updates.filesystemCredentials.ftp.hostname=e("#hostname").val(),t.updates.filesystemCredentials.ftp.username=e("#username").val(),t.updates.filesystemCredentials.ftp.password=e("#password").val(),t.updates.filesystemCredentials.ftp.connectionType=e('input[name="connection_type"]:checked').val(),t.updates.filesystemCredentials.ssh.publicKey=e("#public_key").val(),t.updates.filesystemCredentials.ssh.privateKey=e("#private_key").val(),t.updates.filesystemCredentials.fsNonce=e("#_fs_nonce").val(),t.updates.filesystemCredentials.available=!0,t.updates.ajaxLocked=!1,t.updates.queueChecker(),t.updates.requestForCredentialsModalClose()})),u.on("click",'[data-js-action="close"], .notification-dialog-background',t.updates.requestForCredentialsModalCancel),d.on("change",'input[name="connection_type"]',(function(){e("#ssh-keys").toggleClass("hidden","ssh"!==e(this).val())})).trigger("change"),s.on("credential-modal-cancel",(function(a,s){var i,l,d=e(".updating-message");"import"===pagenow?d.removeClass("updating-message"):"plugins"===pagenow||"plugins-network"===pagenow?"update-plugin"===s.action?i=e('tr[data-plugin="'+s.data.plugin+'"]').find(".update-message"):"delete-plugin"===s.action&&(i=e('[data-plugin="'+s.data.plugin+'"]').find(".row-actions a.delete")):"themes"===pagenow||"themes-network"===pagenow?"update-theme"===s.action?i=e('[data-slug="'+s.data.slug+'"]').find(".update-message"):"delete-theme"===s.action&&"themes-network"===pagenow?i=e('[data-slug="'+s.data.slug+'"]').find(".row-actions a.delete"):"delete-theme"===s.action&&"themes"===pagenow&&(i=e(".theme-actions .delete-theme")):i=d,i&&i.hasClass("updating-message")&&(void 0===(l=i.data("originaltext"))&&(l=e("<p>").html(i.find("p").data("originaltext"))),i.removeClass("updating-message").html(l),"plugin-install"!==pagenow&&"plugin-install-network"!==pagenow||("update-plugin"===s.action?i.attr("aria-label",n(/* translators: %s: Plugin name and version. */
_x("Update %s now","plugin"),i.data("name"))):"install-plugin"===s.action&&i.attr("aria-label",n(/* translators: %s: Plugin name. */
_x("Install %s now","plugin"),i.data("name"))))),t.a11y.speak(__("Update canceled."))})),l.on("click","[data-plugin] .update-link",(function(a){var s=e(a.target),n=s.parents("tr");a.preventDefault(),s.hasClass("updating-message")||s.hasClass("button-disabled")||(t.updates.maybeRequestFilesystemCredentials(a),t.updates.$elToReturnFocusToFromCredentialsModal=n.find(".check-column input"),t.updates.updatePlugin({plugin:n.data("plugin"),slug:n.data("slug")}))})),i.on("click",".update-now",(function(a){var s=e(a.target);a.preventDefault(),s.hasClass("updating-message")||s.hasClass("button-disabled")||(t.updates.maybeRequestFilesystemCredentials(a),t.updates.updatePlugin({plugin:s.data("plugin"),slug:s.data("slug")}))})),i.on("click",".install-now",(function(a){var n=e(a.target);a.preventDefault(),n.hasClass("updating-message")||n.hasClass("button-disabled")||(t.updates.shouldRequestFilesystemCredentials&&!t.updates.ajaxLocked&&(t.updates.requestFilesystemCredentials(a),s.on("credential-modal-cancel",(function(){e(".install-now.updating-message").removeClass("updating-message").text(_x("Install Now","plugin")),t.a11y.speak(__("Update canceled."))}))),t.updates.installPlugin({slug:n.data("slug")}))})),s.on("click","#plugin-information-footer .activate-now",(function(t){t.preventDefault(),window.parent.location.href=e(t.target).attr("href")})),s.on("click",".importer-item .install-now",(function(a){var i=e(a.target),l=e(this).data("name");a.preventDefault(),i.hasClass("updating-message")||(t.updates.shouldRequestFilesystemCredentials&&!t.updates.ajaxLocked&&(t.updates.requestFilesystemCredentials(a),s.on("credential-modal-cancel",(function(){i.removeClass("updating-message").attr("aria-label",n(/* translators: %s: Plugin name. */
_x("Install %s now","plugin"),l)).text(_x("Install Now","plugin")),t.a11y.speak(__("Update canceled."))}))),t.updates.installPlugin({slug:i.data("slug"),pagenow,success:t.updates.installImporterSuccess,error:t.updates.installImporterError}))})),l.on("click","[data-plugin] a.delete",(function(a){var s,i=e(a.target).parents("tr");s=i.hasClass("is-uninstallable")?n(/* translators: %s: Plugin name. */
__("Are you sure you want to delete %s and its data?"),i.find(".plugin-title strong").text()):n(/* translators: %s: Plugin name. */
__("Are you sure you want to delete %s?"),i.find(".plugin-title strong").text()),a.preventDefault(),window.confirm(s)&&(t.updates.maybeRequestFilesystemCredentials(a),t.updates.deletePlugin({plugin:i.data("plugin"),slug:i.data("slug")}))})),s.on("click",".themes-php.network-admin .update-link",(function(a){var s=e(a.target),n=s.parents("tr");a.preventDefault(),s.hasClass("updating-message")||s.hasClass("button-disabled")||(t.updates.maybeRequestFilesystemCredentials(a),t.updates.$elToReturnFocusToFromCredentialsModal=n.find(".check-column input"),t.updates.updateTheme({slug:n.data("slug")}))})),s.on("click",".themes-php.network-admin a.delete",(function(a){var s=e(a.target).parents("tr"),i=n(/* translators: %s: Theme name. */
__("Are you sure you want to delete %s?"),s.find(".theme-title strong").text());a.preventDefault(),window.confirm(i)&&(t.updates.maybeRequestFilesystemCredentials(a),t.updates.deleteTheme({slug:s.data("slug")}))})),l.on("click",'[type="submit"]:not([name="clear-recent-list"])',(function(a){var i,d,u=e(a.target).siblings("select").val(),o=l.find('input[name="checked[]"]:checked'),r=0,p=0,c=[];switch(pagenow){case"plugins":case"plugins-network":i="plugin";break;case"themes-network":i="theme";break;default:return}switch(o.length||(u=!1),u){case"update-selected":d=u.replace("selected",i);break;case"delete-selected":var g=__("plugin"===i?"Are you sure you want to delete the selected plugins and their data?":"Caution: These themes may be active on other sites in the network. Are you sure you want to proceed?");if(!window.confirm(g))return void a.preventDefault();d=u.replace("selected",i);break;default:return}t.updates.maybeRequestFilesystemCredentials(a),a.preventDefault(),l.find('.manage-column [type="checkbox"]').prop("checked",!1),s.trigger("wp-"+i+"-bulk-"+u,o),o.each((function(a,s){var n=e(s),i=n.parents("tr");"update-selected"!==u||i.hasClass("update")&&!i.find("notice-error").length?"update-selected"===u&&i.hasClass("is-enqueued")||(i.addClass("is-enqueued"),t.updates.queue.push({action:d,data:{plugin:i.data("plugin"),slug:i.data("slug")}})):n.prop("checked",!1)})),s.on("wp-plugin-update-success wp-plugin-update-error wp-theme-update-success wp-theme-update-error",(function(a,s){var i,l,d=e('[data-slug="'+s.slug+'"]');"wp-"+s.update+"-update-success"===a.type?r++:(l=s.pluginName?s.pluginName:d.find(".column-primary strong").text(),p++,c.push(l+": "+s.errorMessage)),d.find('input[name="checked[]"]:checked').prop("checked",!1),t.updates.adminNotice=t.template("wp-bulk-updates-admin-notice");var u=null;r&&(u="plugin"===s.update?n(/* translators: %s: Number of plugins. */
_n("%s plugin successfully updated.","%s plugins successfully updated.",r),r):n(/* translators: %s: Number of themes. */
_n("%s theme successfully updated.","%s themes successfully updated.",r),r));var o=null;p&&(o=n(/* translators: %s: Number of failed updates. */
_n("%s update failed.","%s updates failed.",p),p)),t.updates.addAdminNotice({id:"bulk-action-notice",className:"bulk-action-notice",successMessage:u,errorMessage:o,errorMessages:c,type:s.update}),i=e("#bulk-action-notice").on("click","button",(function(){e(this).toggleClass("bulk-action-errors-collapsed").attr("aria-expanded",!e(this).hasClass("bulk-action-errors-collapsed")),i.find(".bulk-action-errors").toggleClass("hidden")})),p>0&&!t.updates.queue.length&&e("html, body").animate({scrollTop:0})})),s.on("wp-updates-notice-added",(function(){t.updates.adminNotice=t.template("wp-updates-admin-notice")})),t.updates.queueChecker()})),r.length&&r.attr("aria-describedby","live-search-desc");var p=0;t.updates.shouldSearch=function(e){var a=e>=t.updates.searchMinCharacters||p>t.updates.searchMinCharacters;return p=e,a},r.on("keyup input",_.debounce((function(a,s){var l,d,u=e(".plugin-install-search"),o=r.val().length;l={_ajax_nonce:t.updates.ajaxNonce,s:encodeURIComponent(a.target.value),tab:"search",type:e("#typeselector").val(),pagenow},d=location.href.split("?")[0]+"?"+e.param(_.omit(l,["_ajax_nonce","pagenow"])),t.updates.shouldSearch(o)?(r.attr("autocomplete","off"),"keyup"===a.type&&27===a.which&&(a.target.value=""),t.updates.searchTerm===l.s&&"typechange"!==s||(i.empty(),t.updates.searchTerm=l.s,window.history&&window.history.replaceState&&window.history.replaceState(null,"",d),u.length||(u=e('<li class="plugin-install-search" />').append(e("<a />",{class:"current",href:d,text:__("Search Results")})),e(".wp-filter .filter-links .current").removeClass("current").parents(".filter-links").prepend(u),i.prev("p").remove(),e(".plugins-popular-tags-wrapper").remove()),void 0!==t.updates.searchRequest&&t.updates.searchRequest.abort(),e("body").addClass("loading-content"),t.updates.searchRequest=t.ajax.post("search-install-plugins",l).done((function(a){e("body").removeClass("loading-content"),i.append(a.items),delete t.updates.searchRequest,0===a.count?t.a11y.speak(__("You do not appear to have any plugins available at this time.")):t.a11y.speak(n(/* translators: %s: Number of plugins. */
__("Number of plugins found: %d"),a.count))})))):r.attr("autocomplete","on")}),1e3)),o.length&&o.attr("aria-describedby","live-search-desc"),o.on("keyup input",_.debounce((function(a){var s,i={_ajax_nonce:t.updates.ajaxNonce,s:encodeURIComponent(a.target.value),pagenow,plugin_status:"all"},d=o.val().length;t.updates.shouldSearch(d)?(o.attr("autocomplete","off"),"keyup"===a.type&&27===a.which&&(a.target.value=""),t.updates.searchTerm!==i.s&&(t.updates.searchTerm=i.s,s=_.object(_.compact(_.map(location.search.slice(1).split("&"),(function(e){if(e)return e.split("=")})))),i.plugin_status=s.plugin_status||"all",window.history&&window.history.replaceState&&window.history.replaceState(null,"",location.href.split("?")[0]+"?s="+i.s+"&plugin_status="+i.plugin_status),void 0!==t.updates.searchRequest&&t.updates.searchRequest.abort(),l.empty(),e("body").addClass("loading-content"),e(".subsubsub .current").removeClass("current"),t.updates.searchRequest=t.ajax.post("search-plugins",i).done((function(a){var s=e("<span />").addClass("subtitle").html(n(/* translators: %s: Search query. */
__("Search results for: %s"),"<strong>"+_.escape(decodeURIComponent(i.s))+"</strong>")),d=e(".wrap .subtitle");i.s.length?d.length?d.replaceWith(s):e(".wp-header-end").before(s):(d.remove(),e(".subsubsub ."+i.plugin_status+" a").addClass("current")),e("body").removeClass("loading-content"),l.append(a.items),delete t.updates.searchRequest,0===a.count?t.a11y.speak(__("No plugins found. Try a different search.")):t.a11y.speak(n(/* translators: %s: Number of plugins. */
__("Number of plugins found: %d"),a.count))})))):o.attr("autocomplete","on")}),500)),s.on("submit",".search-plugins",(function(t){t.preventDefault(),e("input.wp-filter-search").trigger("input")})),s.on("click",".try-again",(function(e){e.preventDefault(),r.trigger("input")})),e("#typeselector").on("change",(function(){var t=e('input[name="s"]');t.val().length&&t.trigger("input","typechange")})),e("#plugin_update_from_iframe").on("click",(function(t){var a,s=window.parent===window?null:window.parent;e.support.postMessage=!!window.postMessage,!1!==e.support.postMessage&&null!==s&&-1===window.parent.location.pathname.indexOf("update-core.php")&&(t.preventDefault(),a={action:"update-plugin",data:{plugin:e(this).data("plugin"),slug:e(this).data("slug")}},s.postMessage(JSON.stringify(a),window.location.origin))})),e(window).on("message",(function(a){var s,n=a.originalEvent,i=document.location.protocol+"//"+document.location.host;if(n.origin===i){try{s=JSON.parse(n.data)}catch(e){return}if(s){if(void 0!==s.status&&void 0!==s.slug&&void 0!==s.text&&void 0!==s.ariaLabel){var l=e(".plugin-card-"+s.slug).find('[data-slug="'+s.slug+'"]');void 0!==s.removeClasses&&l.removeClass(s.removeClasses),void 0!==s.addClasses&&l.addClass(s.addClasses),""===s.ariaLabel?l.removeAttr("aria-label"):l.attr("aria-label",s.ariaLabel),"dependencies-check-success"===s.status&&l.attr("data-name",s.pluginName).attr("data-slug",s.slug).attr("data-plugin",s.plugin).attr("href",s.href),l.text(s.text)}if(void 0!==s.action)switch(s.action){case"decrementUpdateCount":t.updates.decrementCount(s.upgradeType);break;case"install-plugin":case"update-plugin":if(void 0===s.data||void 0===s.data.slug)return;s.data=t.updates._addCallbacks(s.data,s.action),t.updates.queue.push(s),t.updates.queueChecker()}}}})),e(window).on("beforeunload",t.updates.beforeunload),s.on("keydown",".column-auto-updates .toggle-auto-update, .theme-overlay .toggle-auto-update",(function(e){32===e.which&&e.preventDefault()})),s.on("click keyup",".column-auto-updates .toggle-auto-update, .theme-overlay .toggle-auto-update",(function(n){var i,l,d,u,o=e(this),r=o.attr("data-wp-action"),p=o.find(".label");if(("keyup"!==n.type||32===n.which)&&(u="themes"!==pagenow?o.closest(".column-auto-updates"):o.closest(".theme-autoupdate"),n.preventDefault(),"yes"!==o.attr("data-doing-ajax"))){switch(o.attr("data-doing-ajax","yes"),pagenow){case"plugins":case"plugins-network":d="plugin",l=o.closest("tr").attr("data-plugin");break;case"themes-network":d="theme",l=o.closest("tr").attr("data-slug");break;case"themes":d="theme",l=o.attr("data-slug")}u.find(".notice.notice-error").addClass("hidden"),"enable"===r?p.text(__("Enabling...")):p.text(__("Disabling...")),o.find(".dashicons-update").removeClass("hidden"),i={action:"toggle-auto-updates",_ajax_nonce:a.ajax_nonce,state:r,type:d,asset:l},e.post(window.ajaxurl,i).done((function(a){var n,i,c,g,m,f=o.attr("href");if(!a.success)return m=a.data&&a.data.error?a.data.error:__("The request could not be completed."),u.find(".notice.notice-error").removeClass("hidden").find("p").text(m),void t.a11y.speak(m,"assertive");if("themes"!==pagenow){switch(n=e(".auto-update-enabled span"),i=e(".auto-update-disabled span"),c=parseInt(n.text().replace(/[^\d]+/g,""),10)||0,g=parseInt(i.text().replace(/[^\d]+/g,""),10)||0,r){case"enable":++c,--g;break;case"disable":--c,++g}c=Math.max(0,c),g=Math.max(0,g),n.text("("+c+")"),i.text("("+g+")")}"enable"===r?(o[0].hasAttribute("href")&&(f=f.replace("action=enable-auto-update","action=disable-auto-update"),o.attr("href",f)),o.attr("data-wp-action","disable"),p.text(__("Disable auto-updates")),u.find(".auto-update-time").removeClass("hidden"),t.a11y.speak(__("Auto-updates enabled"))):(o[0].hasAttribute("href")&&(f=f.replace("action=disable-auto-update","action=enable-auto-update"),o.attr("href",f)),o.attr("data-wp-action","enable"),p.text(__("Enable auto-updates")),u.find(".auto-update-time").addClass("hidden"),t.a11y.speak(__("Auto-updates disabled"))),s.trigger("wp-auto-update-setting-changed",{state:r,type:d,asset:l})})).fail((function(){u.find(".notice.notice-error").removeClass("hidden").find("p").text(__("The request could not be completed.")),t.a11y.speak(__("The request could not be completed."),"assertive")})).always((function(){o.removeAttr("data-doing-ajax").find(".dashicons-update").addClass("hidden")}))}}))}))})();