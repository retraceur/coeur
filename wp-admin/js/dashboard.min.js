window.wp=window.wp||{},window.communityEventsData=window.communityEventsData||{},jQuery((function(e){var t,n=e("#welcome-panel"),i=e("#wp_welcome_panel-hide");t=function(t){e.post(ajaxurl,{action:"update-welcome-panel",visible:t,welcomepanelnonce:e("#welcomepanelnonce").val()})},n.hasClass("hidden")&&i.prop("checked")&&n.removeClass("hidden"),e(".welcome-panel-close, .welcome-panel-dismiss a",n).on("click",(function(i){i.preventDefault(),n.addClass("hidden"),t(0),e("#wp_welcome_panel-hide").prop("checked",!1)})),i.on("click",(function(){n.toggleClass("hidden",!this.checked),t(this.checked?1:0)})),window.ajaxWidgets=["dashboard_primary"],window.ajaxPopulateWidgets=function(t){function n(t,n){var i,o=e("#"+n+" div.inside:visible").find(".widget-loading");o.length&&(i=o.parent(),setTimeout((function(){i.load(ajaxurl+"?action=dashboard-widgets&widget="+n+"&pagenow="+pagenow,"",(function(){i.hide().slideDown("normal",(function(){e(this).css("display","")}))}))}),500*t))}t?(t=t.toString(),-1!==e.inArray(t,ajaxWidgets)&&n(0,t)):e.each(ajaxWidgets,n)},ajaxPopulateWidgets(),postboxes.add_postbox_toggles(pagenow,{pbshow:ajaxPopulateWidgets}),window.quickPressLoad=function(){var t,n=e("#quickpost-action");e('#quick-press .submit input[type="submit"], #quick-press .submit input[type="reset"]').prop("disabled",!1),t=e("#quick-press").on("submit",(function(n){n.preventDefault(),e("#dashboard_quick_press #publishing-action .spinner").show(),e('#quick-press .submit input[type="submit"], #quick-press .submit input[type="reset"]').prop("disabled",!0),e.post(t.attr("action"),t.serializeArray(),(function(t){var n;e("#dashboard_quick_press .inside").html(t),e("#quick-press").removeClass("initial-form"),quickPressLoad(),(n=e(".drafts ul li").first()).css("background","#fffbe5"),setTimeout((function(){n.css("background","none")}),1e3),e("#title").trigger("focus")}))})),e("#publish").on("click",(function(){n.val("post-quickpress-publish")})),e("#quick-press").on("click focusin",(function(){wpActiveEditor="content"})),function(){if(!(document.documentMode&&document.documentMode<9)){e("body").append('<div class="quick-draft-textarea-clone" style="display: none;"></div>');var t=e(".quick-draft-textarea-clone"),n=e("#content"),i=n.height(),o=e(window).height()-100;t.css({"font-family":n.css("font-family"),"font-size":n.css("font-size"),"line-height":n.css("line-height"),"padding-bottom":n.css("paddingBottom"),"padding-left":n.css("paddingLeft"),"padding-right":n.css("paddingRight"),"padding-top":n.css("paddingTop"),"white-space":"pre-wrap","word-wrap":"break-word",display:"none"}),n.on("focus input propertychange",(function(){var a=e(this),s=a.val()+"&nbsp;",c=t.css("width",a.css("width")).text(s).outerHeight()+2;n.css("overflow-y","auto"),c===i||c>=o&&i>=o||(i=c>o?o:c,n.css("overflow","hidden"),a.css("height",i+"px"))}))}}()},window.quickPressLoad(),e(".meta-box-sortables").sortable("option","containment","#wpwrap")})),jQuery((function(e){"use strict";var t,n=window.communityEventsData,i=wp.date.dateI18n,o=wp.date.format,a=wp.i18n.sprintf,__=wp.i18n.__,_x=wp.i18n._x;t=window.wp.communityEvents={initialized:!1,model:null,init:function(){if(!t.initialized){var i=e("#community-events");e(".community-events-errors").attr("aria-hidden","true").removeClass("hide-if-js"),i.on("click",".community-events-toggle-location, .community-events-cancel",t.toggleLocationForm),i.on("submit",".community-events-form",(function(n){var i=e("#community-events-location").val().trim();n.preventDefault(),i&&t.getEvents({location:i})})),n&&n.cache&&n.cache.location&&n.cache.events?t.renderEventsTemplate(n.cache,"app"):t.getEvents(),t.initialized=!0}},toggleLocationForm:function(t){var n=e(".community-events-toggle-location"),i=e(".community-events-cancel"),o=e(".community-events-form"),a=e();"object"==typeof t&&(a=e(t.target),t="true"==n.attr("aria-expanded")?"hide":"show"),"hide"===t?(n.attr("aria-expanded","false"),i.attr("aria-expanded","false"),o.attr("aria-hidden","true"),a.hasClass("community-events-cancel")&&n.trigger("focus")):(n.attr("aria-expanded","true"),i.attr("aria-expanded","true"),o.attr("aria-hidden","false"))},getEvents:function(t){var i,o=this,a=e(".community-events-form").children(".spinner");(t=t||{})._wpnonce=n.nonce,t.timezone=window.Intl?window.Intl.DateTimeFormat().resolvedOptions().timeZone:"",i=t.location?"user":"app",a.addClass("is-active"),wp.ajax.post("get-community-events",t).always((function(){a.removeClass("is-active")})).done((function(e){"no_location_available"===e.error&&(t.location?e.unknownCity=t.location:delete e.error),o.renderEventsTemplate(e,i)})).fail((function(){o.renderEventsTemplate({location:!1,events:[],error:!0},i)}))},renderEventsTemplate:function(i,o){var s,c,r=e(".community-events-toggle-location"),m=e("#community-events-location-message"),d=e(".community-events-results");i.events=t.populateDynamicEventFields(i.events,n.time_format),c={".community-events":!0,".community-events-loading":!1,".community-events-errors":!1,".community-events-error-occurred":!1,".community-events-could-not-locate":!1,"#community-events-location-message":!1,".community-events-toggle-location":!1,".community-events-results":!1},i.location.ip?(m.text(__("Attend an upcoming event near you.")),i.events.length?(s=wp.template("community-events-event-list"),d.html(s(i))):(s=wp.template("community-events-no-upcoming-events"),d.html(s(i))),c["#community-events-location-message"]=!0,c[".community-events-toggle-location"]=!0,c[".community-events-results"]=!0):i.location.description?(s=wp.template("community-events-attend-event-near"),m.html(s(i)),i.events.length?(s=wp.template("community-events-event-list"),d.html(s(i))):(s=wp.template("community-events-no-upcoming-events"),d.html(s(i))),"user"===o&&wp.a11y.speak(a(/* translators: %s: The name of a city. */
__("City updated. Listing events near %s."),i.location.description),"assertive"),c["#community-events-location-message"]=!0,c[".community-events-toggle-location"]=!0,c[".community-events-results"]=!0):i.unknownCity?(s=wp.template("community-events-could-not-locate"),e(".community-events-could-not-locate").html(s(i)),wp.a11y.speak(a(
/*
         * translators: %s is the name of the city we couldn't locate.
         * Replace the examples with cities related to your locale. Test that
         * they match the expected location and have upcoming events before
         * including them. If no cities related to your locale have events,
         * then use cities related to your locale that would be recognizable
         * to most users. Use only the city name itself, without any region
         * or country. Use the endonym (native locale name) instead of the
         * English name if possible.
         */
__("We couldn’t locate %s. Please try another nearby city. For example: Kansas City; Springfield; Portland."),i.unknownCity)),c[".community-events-errors"]=!0,c[".community-events-could-not-locate"]=!0):i.error&&"user"===o?(wp.a11y.speak(__("An error occurred. Please try again.")),c[".community-events-errors"]=!0,c[".community-events-error-occurred"]=!0):(m.text(__("Enter your closest city to find nearby events.")),c["#community-events-location-message"]=!0,c[".community-events-toggle-location"]=!0),_.each(c,(function(t,n){e(n).attr("aria-hidden",!t)})),r.attr("aria-expanded",c[".community-events-toggle-location"]),i.location&&(i.location.ip||i.location.latitude)?(t.toggleLocationForm("hide"),"user"===o&&r.trigger("focus")):t.toggleLocationForm("show")},populateDynamicEventFields:function(n,o){var a=JSON.parse(JSON.stringify(n));return e.each(a,(function(e,n){var a=t.getTimeZone(1e3*n.start_unix_timestamp);n.user_formatted_date=t.getFormattedDate(1e3*n.start_unix_timestamp,1e3*n.end_unix_timestamp,a),n.user_formatted_time=i(o,1e3*n.start_unix_timestamp,a),n.timeZoneAbbreviation=t.getTimeZoneAbbreviation(1e3*n.start_unix_timestamp)})),a},getTimeZone:function(e){var n=Intl.DateTimeFormat().resolvedOptions().timeZone;return void 0===n&&(n=t.getFlippedTimeZoneOffset(e)),n},getFlippedTimeZoneOffset:function(e){return-1*new Date(e).getTimezoneOffset()},getTimeZoneAbbreviation:function(e){var n,i=new Date(e).toLocaleTimeString(void 0,{timeZoneName:"short"}).split(" ");if(3===i.length&&(n=i[2]),void 0===n){var o=t.getFlippedTimeZoneOffset(e),a=-1===Math.sign(o)?"":"+";
// translators: Used as part of a string like `GMT+5` in the Events Widget.
n=_x("GMT","Events widget offset prefix")+a+o/60}return n},getFormattedDate:function(e,t,n){var s=__("l, M j, Y"),
/* translators: Date string for upcoming events. 1: Month, 2: Starting day, 3: Ending day, 4: Year. */
c=__("%1$s %2$d–%3$d, %4$d"),
/* translators: Date string for upcoming events. 1: Starting month, 2: Starting day, 3: Ending month, 4: Ending day, 5: Ending year. */
r=__("%1$s %2$d – %3$s %4$d, %5$d");
/* translators: Date format for upcoming events on the dashboard. Include the day of the week. See https://www.php.net/manual/datetime.format.php */return t&&o("Y-m-d",e)!==o("Y-m-d",t)?o("Y-m",e)===o("Y-m",t)?a(c,i(_x("F","upcoming events month format"),e,n),i(_x("j","upcoming events day format"),e,n),i(_x("j","upcoming events day format"),t,n),i(_x("Y","upcoming events year format"),t,n)):a(r,i(_x("F","upcoming events month format"),e,n),i(_x("j","upcoming events day format"),e,n),i(_x("F","upcoming events month format"),t,n),i(_x("j","upcoming events day format"),t,n),i(_x("Y","upcoming events year format"),t,n)):i(s,e,n)}},e("#dashboard_primary").is(":visible")?t.init():e(document).on("postbox-toggled",(function(n,i){var o=e(i);"dashboard_primary"===o.attr("id")&&o.is(":visible")&&t.init()}))})),window.communityEventsData.l10n=window.communityEventsData.l10n||{enter_closest_city:"",error_occurred_please_try_again:"",attend_event_near_generic:"",could_not_locate_city:"",city_updated:""},window.communityEventsData.l10n=window.wp.deprecateL10nObject("communityEventsData.l10n",window.communityEventsData.l10n,"5.6.0");