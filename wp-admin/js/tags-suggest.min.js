!function(t){var e=0,n=wp.i18n._x(",","tag delimiter")||",",__=wp.i18n.__,_n=wp.i18n._n,o=wp.i18n.sprintf;function a(t){return t.split(new RegExp(n+"\\s*"))}t.fn.wpTagsSuggest=function(i){var r,s,u=t(this);if(!u.length)return this;var d=(i=i||{}).taxonomy||u.attr("data-wp-taxonomy")||"post_tag";return delete i.taxonomy,i=t.extend({source:function(n,o){var i;s!==n.term?(i=function(t){return a(t).pop()}(n.term),t.get(window.ajaxurl,{action:"ajax-tag-search",tax:d,q:i,number:20}).always((function(){u.removeClass("ui-autocomplete-loading")})).done((function(t){var n,a=[];if(t){for(n in t=t.split("\n")){var i=++e;a.push({id:i,name:t[n]})}r=a,o(a)}else o(a)})),s=n.term):o(r)},focus:function(t,e){u.attr("aria-activedescendant","wp-tags-autocomplete-"+e.item.id),t.preventDefault()},select:function(e,o){var i=a(u.val());return i.pop(),i.push(o.item.name,""),u.val(i.join(n+" ")),t.ui.keyCode.TAB===e.keyCode?(window.wp.a11y.speak(wp.i18n.__("Term selected."),"assertive"),e.preventDefault()):t.ui.keyCode.ENTER===e.keyCode&&(window.tagBox&&(window.tagBox.userAction="add",window.tagBox.flushTags(t(this).closest(".tagsdiv"))),e.preventDefault(),e.stopPropagation()),!1},open:function(){u.attr("aria-expanded","true")},close:function(){u.attr("aria-expanded","false")},minLength:2,position:{my:"left top+2",at:"left bottom",collision:"none"},messages:{noResults:__("No results found."),results:function(t){return o(/* translators: %d: Number of search results found. */
_n("%d result found. Use up and down arrow keys to navigate.","%d results found. Use up and down arrow keys to navigate.",t),t)}}},i),u.on("keydown",(function(){u.removeAttr("aria-activedescendant")})),u.autocomplete(i),u.autocomplete("instance")?(u.autocomplete("instance")._renderItem=function(e,n){return t('<li role="option" id="wp-tags-autocomplete-'+n.id+'">').text(n.name).appendTo(e)},u.attr({role:"combobox","aria-autocomplete":"list","aria-expanded":"false","aria-owns":u.autocomplete("widget").attr("id")}).on("focus",(function(){a(u.val()).pop()&&u.autocomplete("search")})),u.autocomplete("widget").addClass("wp-tags-autocomplete").attr("role","listbox").removeAttr("tabindex").on("menufocus",(function(t,e){e.item.attr("aria-selected","true")})).on("menublur",(function(){t(this).find('[aria-selected="true"]').removeAttr("aria-selected")})),this):this}}(jQuery);