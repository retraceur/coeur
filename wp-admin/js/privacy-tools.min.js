jQuery((function(e){var t,__=wp.i18n.__;function a(e,t){e.children().addClass("hidden"),e.children("."+t).removeClass("hidden")}function o(e){e.removeClass("has-request-results"),e.next().hasClass("request-results")&&e.next().remove()}function s(t,a,s,n){var r="",i="request-results";o(t),n.length&&(e.each(n,(function(e,t){r=r+"<li>"+t+"</li>"})),r="<ul>"+r+"</ul>"),t.addClass("has-request-results"),t.hasClass("status-request-confirmed")&&(i+=" status-request-confirmed"),t.hasClass("status-request-failed")&&(i+=" status-request-failed"),t.after((function(){return'<tr class="'+i+'"><th colspan="5"><div class="notice inline notice-alt '+a+'" role="alert"><p>'+s+"</p>"+r+"</div></td></tr>"}))}e(".export-personal-data-handle").on("click",(function(t){var n=e(this),r=n.parents(".export-personal-data"),i=n.parents("tr"),c=i.find(".export-progress"),d=n.parents(".row-actions"),l=r.data("request-id"),u=r.data("nonce"),p=r.data("exporters-count"),m=!!r.data("send-as-email");function f(e){var t=__("An error occurred while attempting to export personal data.");a(r,"export-personal-data-failed"),e&&s(i,"notice-error",t,[e]),setTimeout((function(){d.removeClass("processing")}),500)}function v(e){var t=p>0?e/p:0,a=Math.round(100*t).toString()+"%";c.html(a)}t.preventDefault(),t.stopPropagation(),d.addClass("processing"),r.trigger("blur"),o(i),v(0),a(r,"export-personal-data-processing"),function t(o,n){e.ajax({url:window.ajaxurl,data:{action:"wp-privacy-export-personal-data",exporter:o,id:l,page:n,security:u,sendAsEmail:m},method:"post"}).done((function(e){var c=e.data;e.success?c.done?(v(o),o<p?setTimeout(t(o+1,1)):setTimeout((function(){var e,t;e=c.url,t=__("This user&#8217;s personal data export link was sent."),void 0!==e&&(t=__("This user&#8217;s personal data export file was downloaded.")),a(r,"export-personal-data-success"),s(i,"notice-success",t,[]),void 0!==e?window.location=e:m||f(__("No personal data export file was generated.")),setTimeout((function(){d.removeClass("processing")}),500)}),500)):setTimeout(t(o,n+1)):setTimeout((function(){f(e.data)}),500)})).fail((function(e,t,a){setTimeout((function(){f(a)}),500)}))}(1,1)})),e(".remove-personal-data-handle").on("click",(function(t){var n=e(this),r=n.parents(".remove-personal-data"),i=n.parents("tr"),c=i.find(".erasure-progress"),d=n.parents(".row-actions"),l=r.data("request-id"),u=r.data("nonce"),p=r.data("erasers-count"),m=!1,f=!1,v=[];function g(){var e=__("An error occurred while attempting to find and erase personal data.");a(r,"remove-personal-data-failed"),s(i,"notice-error",e,[]),setTimeout((function(){d.removeClass("processing")}),500)}function h(e){var t=p>0?e/p:0,a=Math.round(100*t).toString()+"%";c.html(a)}t.preventDefault(),t.stopPropagation(),d.addClass("processing"),r.trigger("blur"),o(i),h(0),a(r,"remove-personal-data-processing"),function t(o,n){e.ajax({url:window.ajaxurl,data:{action:"wp-privacy-erase-personal-data",eraser:o,id:l,page:n,security:u},method:"post"}).done((function(e){var c=e.data;e.success?(c.items_removed&&(m=m||c.items_removed),c.items_retained&&(f=f||c.items_retained),c.messages&&(v=v.concat(c.messages)),c.done?(h(o),o<p?setTimeout(t(o+1,1)):setTimeout((function(){var e,t;e=__("No personal data was found for this user."),t="notice-success",a(r,"remove-personal-data-success"),!1===m?!1===f?e=__("No personal data was found for this user."):(e=__("Personal data was found for this user but was not erased."),t="notice-warning"):!1===f?e=__("All of the personal data found for this user was erased."):(e=__("Personal data was found for this user but some of the personal data found was not erased."),t="notice-warning"),s(i,t,e,v),setTimeout((function(){d.removeClass("processing")}),500)}),500)):setTimeout(t(o,n+1))):setTimeout((function(){g()}),500)})).fail((function(){setTimeout((function(){g()}),500)}))}(1,1)})),e(document).on("click",(function(a){var o,s,n=e(a.target),r=n.siblings(".success");if(clearTimeout(t),n.is("button.privacy-text-copy")&&(o=n.closest(".privacy-settings-accordion-panel")).length)try{var i=document.documentElement.scrollTop,c=document.body.scrollTop;window.getSelection().removeAllRanges(),s=document.createRange(),o.addClass("hide-privacy-policy-tutorial"),s.selectNodeContents(o[0]),window.getSelection().addRange(s),document.execCommand("copy"),o.removeClass("hide-privacy-policy-tutorial"),window.getSelection().removeAllRanges(),i>0&&i!==document.documentElement.scrollTop?document.documentElement.scrollTop=i:c>0&&c!==document.body.scrollTop&&(document.body.scrollTop=c),r.addClass("visible"),wp.a11y.speak(__("The suggested policy text has been copied to your clipboard.")),t=setTimeout((function(){r.removeClass("visible")}),3e3)}catch(e){}})),e("body.options-privacy-php label[for=create-page]").on("click",(function(t){t.preventDefault(),e("input#create-page").trigger("focus")})),e(".privacy-settings-accordion").on("click",".privacy-settings-accordion-trigger",(function(){"true"===e(this).attr("aria-expanded")?(e(this).attr("aria-expanded","false"),e("#"+e(this).attr("aria-controls")).attr("hidden",!0)):(e(this).attr("aria-expanded","true"),e("#"+e(this).attr("aria-controls")).attr("hidden",!1))}))}));