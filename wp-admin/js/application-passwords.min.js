!function(e){var a=e("#application-passwords-section"),s=a.find(".create-application-password"),i=s.find(".input"),o=s.find(".button"),t=a.find(".application-passwords-list-table-wrapper"),n=a.find("tbody"),r=n.find(".no-items"),p=e("#revoke-all-application-passwords"),d=wp.template("new-application-password"),l=wp.template("application-password-row"),c=e("#user_id").val();function u(e,a,s){var i=s;e.responseJSON&&e.responseJSON.message&&(i=e.responseJSON.message),w(i,"error")}function w(a,i){var o=e("<div></div>").attr("role","alert").attr("tabindex","-1").addClass("is-dismissible notice notice-"+i).append(e("<p></p>").text(a)).append(e("<button></button>").attr("type","button").addClass("notice-dismiss").append(e("<span></span>").addClass("screen-reader-text").text(wp.i18n.__("Dismiss this notice."))));return s.after(o),o}function f(){e(".notice",a).remove()}o.on("click",(function(a){if(a.preventDefault(),!o.prop("aria-disabled")){var p=i.val();if(0!==p.length){f(),o.prop("aria-disabled",!0).addClass("disabled");var w={name:p};w=wp.hooks.applyFilters("wp_application_passwords_new_password_request",w,c),wp.apiRequest({path:"/wp/v2/users/"+c+"/application-passwords?_locale=user",method:"POST",data:w}).always((function(){o.removeProp("aria-disabled").removeClass("disabled")})).done((function(a){i.val(""),o.prop("disabled",!1),s.after(d({name:a.name,password:a.password})),e(".new-application-password-notice").attr("tabindex","-1").trigger("focus"),n.prepend(l(a)),t.show(),r.remove(),wp.hooks.doAction("wp_application_passwords_created_password",a,w)})).fail(u)}else i.trigger("focus")}})),n.on("click",".delete",(function(a){if(a.preventDefault(),window.confirm(wp.i18n.__("Are you sure you want to revoke this password? This action cannot be undone."))){var s=e(this),i=s.closest("tr"),o=i.data("uuid");f(),s.prop("disabled",!0),wp.apiRequest({path:"/wp/v2/users/"+c+"/application-passwords/"+o+"?_locale=user",method:"DELETE"}).always((function(){s.prop("disabled",!1)})).done((function(e){e.deleted&&(0===i.siblings().length&&t.hide(),i.remove(),w(wp.i18n.__("Application password revoked."),"success").trigger("focus"))})).fail(u)}})),p.on("click",(function(s){if(s.preventDefault(),window.confirm(wp.i18n.__("Are you sure you want to revoke all passwords? This action cannot be undone."))){var i=e(this);f(),i.prop("disabled",!0),wp.apiRequest({path:"/wp/v2/users/"+c+"/application-passwords?_locale=user",method:"DELETE"}).always((function(){i.prop("disabled",!1)})).done((function(e){e.deleted&&(n.children().remove(),a.children(".new-application-password").remove(),t.hide(),w(wp.i18n.__("All application passwords revoked."),"success").trigger("focus"))})).fail(u)}})),a.on("click",".notice-dismiss",(function(a){a.preventDefault();var s=e(this).parent();s.removeAttr("role"),s.fadeTo(100,0,(function(){s.slideUp(100,(function(){s.remove(),i.trigger("focus")}))}))})),i.on("keypress",(function(e){13===e.which&&(e.preventDefault(),o.trigger("click"))})),0===n.children("tr").not(r).length&&t.hide()}(jQuery);