(()=>{"use strict";var e={n:t=>{var s=t&&t.__esModule?()=>t.default:()=>t;return e.d(s,{a:s}),s},d:(t,s)=>{for(var o in s)e.o(s,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:s[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{PluginBlockSettingsMenuItem:()=>zt,PluginDocumentSettingPanel:()=>Ht,PluginMoreMenuItem:()=>qt,PluginPostPublishPanel:()=>$t,PluginPostStatusInfo:()=>Wt,PluginPrePublishPanel:()=>Qt,PluginSidebar:()=>Zt,PluginSidebarMoreMenuItem:()=>Xt,__experimentalFullscreenModeClose:()=>k,__experimentalMainDashboardButton:()=>Kt,__experimentalPluginPostExcerpt:()=>Yt,initializeEditor:()=>es,reinitializeEditor:()=>ts,store:()=>et});var s={};e.r(s),e.d(s,{__experimentalSetPreviewDeviceType:()=>me,__unstableCreateTemplate:()=>fe,closeGeneralSidebar:()=>Z,closeModal:()=>Y,closePublishSidebar:()=>J,hideBlockTypes:()=>le,initializeMetaBoxes:()=>ve,metaBoxUpdatesFailure:()=>ge,metaBoxUpdatesSuccess:()=>pe,openGeneralSidebar:()=>W,openModal:()=>X,openPublishSidebar:()=>K,removeEditorPanel:()=>oe,requestMetaBoxUpdates:()=>ue,setAvailableMetaBoxesPerLocation:()=>de,setIsEditingTemplate:()=>ye,setIsInserterOpened:()=>he,setIsListViewOpened:()=>we,showBlockTypes:()=>ce,switchEditorMode:()=>re,toggleDistractionFree:()=>be,toggleEditorPanelEnabled:()=>te,toggleEditorPanelOpened:()=>se,toggleFeature:()=>ie,togglePinnedPluginItem:()=>ne,togglePublishSidebar:()=>ee,updatePreferredStyleVariations:()=>ae});var o={};e.r(o),e.d(o,{getEditedPostTemplateId:()=>xe});var i={};e.r(i),e.d(i,{__experimentalGetInsertionPoint:()=>Ze,__experimentalGetPreviewDeviceType:()=>$e,areMetaBoxesInitialized:()=>Ke,getActiveGeneralSidebarName:()=>je,getActiveMetaBoxLocations:()=>Ve,getAllMetaBoxes:()=>He,getEditedPostTemplate:()=>Je,getEditorMode:()=>Me,getHiddenBlockTypes:()=>ke,getMetaBoxesPerLocation:()=>ze,getPreference:()=>Ie,getPreferences:()=>Be,hasMetaBoxes:()=>qe,isEditingTemplate:()=>Ye,isEditorPanelEnabled:()=>De,isEditorPanelOpened:()=>Oe,isEditorPanelRemoved:()=>Re,isEditorSidebarOpened:()=>Ce,isFeatureActive:()=>Ne,isInserterOpened:()=>We,isListViewOpened:()=>Xe,isMetaBoxLocationActive:()=>Ue,isMetaBoxLocationVisible:()=>Ge,isModalActive:()=>Le,isPluginItemPinned:()=>Fe,isPluginSidebarOpened:()=>Te,isPublishSidebarOpened:()=>Ae,isSavingMetaBoxes:()=>Qe});const r=window.wp.blocks,n=window.wp.blockLibrary,a=window.wp.deprecated;var c=e.n(a);const l=window.wp.element,d=window.wp.data,u=window.wp.preferences,p=window.wp.widgets,g=window.wp.editor;function m(e){var t,s,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(s=m(e[t]))&&(o&&(o+=" "),o+=s)}else for(s in e)e[s]&&(o&&(o+=" "),o+=s);return o}const h=function(){for(var e,t,s=0,o="",i=arguments.length;s<i;s++)(e=arguments[s])&&(t=m(e))&&(o&&(o+=" "),o+=t);return o},w=window.wp.blockEditor,y=window.wp.plugins,f=window.wp.i18n,_=window.wp.primitives,v=window.ReactJSXRuntime,b=(0,v.jsx)(_.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)(_.Path,{d:"M6.5 12.4L12 8l5.5 4.4-.9 1.2L12 10l-4.5 3.6-1-1.2z"})}),x=(0,v.jsx)(_.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)(_.Path,{d:"M17.5 11.6L12 16l-5.5-4.4.9-1.2L12 14l4.5-3.6 1 1.2z"})}),S=window.wp.notices,P=window.wp.commands,E=window.wp.coreCommands,M=window.wp.url,C=window.wp.htmlEntities,T=window.wp.coreData,j=window.wp.components,B=window.wp.compose,I=(0,v.jsx)(_.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",children:(0,v.jsx)(_.Path,{d:"M 59.241 22.173 C 62.135 30.193 61.292 38.261 57.921 44.947 C 56.381 48.081 54.432 51.046 51.697 53.228 L 51.156 53.542 C 48.635 54.651 43.357 54.566 39.368 51.349 C 35.273 48.046 32.084 42.302 30.631 35.803 C 29.446 35.664 28.36 35.411 27.374 35.044 L 27.374 43.018 C 27.411 43.941 27.494 44.689 27.622 45.262 C 27.752 45.833 28.076 46.313 28.592 46.702 C 29.109 47.088 29.903 47.281 30.973 47.281 L 31.306 47.281 C 31.674 47.281 31.943 47.346 32.11 47.477 C 32.275 47.605 32.376 47.927 32.413 48.444 C 32.413 48.776 32.331 49.062 32.166 49.301 C 31.999 49.541 31.748 49.662 31.416 49.662 C 29.054 49.551 26.747 49.496 24.495 49.496 C 22.502 49.496 20.305 49.551 17.906 49.662 C 17.611 49.662 17.371 49.541 17.186 49.301 C 17.001 49.062 16.909 48.776 16.909 48.444 C 16.946 47.891 17.065 47.558 17.267 47.447 C 17.471 47.336 17.832 47.281 18.349 47.281 C 19.419 47.281 20.213 47.088 20.73 46.702 C 21.247 46.313 21.569 45.833 21.697 45.262 C 21.827 44.689 21.911 43.941 21.948 43.018 L 21.948 21.036 C 21.911 20.113 21.827 19.366 21.697 18.795 C 21.569 18.222 21.247 17.74 20.73 17.352 C 20.213 16.965 19.419 16.772 18.349 16.772 L 18.017 16.772 C 17.648 16.772 17.381 16.708 17.215 16.58 C 17.048 16.45 16.946 16.126 16.909 15.609 C 16.909 15.277 17.001 14.99 17.186 14.749 C 17.371 14.51 17.611 14.391 17.906 14.391 C 20.305 14.502 22.52 14.557 24.55 14.557 L 32.856 14.557 C 36.067 14.557 39.177 15.222 42.184 16.551 C 45.193 17.879 46.698 20.537 46.698 24.524 C 46.698 26.739 46.034 28.714 44.705 30.448 C 43.376 32.184 41.651 33.531 39.53 34.491 C 37.855 35.248 36.128 35.706 34.351 35.866 C 35.455 40.069 37.576 43.943 40.573 46.36 C 44.13 49.229 48.07 49.173 50.909 46.214 C 51.144 45.97 51.366 45.712 51.577 45.441 C 51.878 45.007 52.162 44.568 52.428 44.124 L 52.434 44.124 C 60.743 30.284 52.861 11.614 36.19 8.625 C 27.839 7.128 19.324 10.2 13.852 16.684 C 2.061 30.654 9.815 52.149 27.809 55.375 C 30.879 55.925 33.971 55.858 36.926 55.231 C 37.214 55.142 37.523 55.093 37.845 55.093 C 39.431 55.093 40.716 56.272 40.716 57.725 C 40.716 59.08 39.598 60.197 38.161 60.341 C 34.613 61.106 30.815 61.209 26.89 60.506 C 16.705 58.68 8.269 51.56 4.758 41.827 C -2.807 20.856 15.166 -0.44 37.11 3.494 C 47.294 5.32 55.73 12.44 59.241 22.173 Z M 31.306 33.439 C 32.634 33.439 34.01 33.172 35.432 32.638 C 36.852 32.101 38.061 31.178 39.057 29.869 C 40.054 28.557 40.553 26.831 40.553 24.69 C 40.553 21.442 39.519 19.282 37.452 18.212 C 35.385 17.141 33.188 16.606 30.863 16.606 C 29.903 16.606 29.183 16.708 28.703 16.912 C 28.223 17.114 27.883 17.51 27.681 18.101 C 27.476 18.692 27.374 19.614 27.374 20.87 L 27.374 32.829 C 28.26 33.236 29.57 33.439 31.306 33.439 Z"})}),k=function({showTooltip:e,icon:t,href:s,initialPost:o}){var i;const{isRequestingSiteIcon:r,postType:n,siteIconUrl:a}=(0,d.useSelect)((e=>{const{getCurrentPostType:t}=e(g.store),{getEntityRecord:s,getPostType:i,isResolving:r}=e(T.store),n=s("root","__unstableBase",void 0)||{},a=o?.type||t();return{isRequestingSiteIcon:r("getEntityRecord",["root","__unstableBase",void 0]),postType:i(a),siteIconUrl:n.site_icon_url}}),[]),c=(0,B.useReducedMotion)();if(!n)return null;let l=(0,v.jsx)(j.Icon,{size:"36px",icon:I});a&&(l=(0,v.jsx)(j.__unstableMotion.img,{variants:!c&&{expand:{scale:1.25,transition:{type:"tween",duration:"0.3"}}},alt:(0,f.__)("Site Icon"),className:"edit-post-fullscreen-mode-close_site-icon",src:a})),r&&(l=null),t&&(l=(0,v.jsx)(j.Icon,{size:"36px",icon:t}));const u=h("edit-post-fullscreen-mode-close",{"has-icon":a}),p=null!=s?s:(0,M.addQueryArgs)("edit.php",{post_type:n.slug}),m=null!==(i=n?.labels?.view_items)&&void 0!==i?i:(0,f.__)("Back");return(0,v.jsx)(j.__unstableMotion.div,{whileHover:"expand",children:(0,v.jsx)(j.Button,{__next40pxDefaultSize:!1,className:u,href:p,label:m,showTooltip:e,children:l})})},A=window.wp.privateApis,{lock:R,unlock:D}=(0,A.__dangerousOptInToUnstableAPIsOnlyForCoreModules)("I acknowledge private features are not for use in themes or plugins and doing so will break in the next version of Retraceur.","@wordpress/edit-post"),{BackButton:O}=D(g.privateApis),L={hidden:{x:"-100%"},distractionFreeInactive:{x:0},hover:{x:0,transition:{type:"tween",delay:.2}}},N=function({initialPost:e}){return(0,v.jsx)(O,{children:({length:t})=>t<=1&&(0,v.jsx)(j.__unstableMotion.div,{variants:L,transition:{type:"tween",delay:.8},children:(0,v.jsx)(k,{showTooltip:!0,initialPost:e})})})};function F(){return(()=>{const{newPermalink:e}=(0,d.useSelect)((e=>({newPermalink:e(g.store).getCurrentPost().link})),[]),t=(0,l.useRef)();(0,l.useEffect)((()=>{t.current=document.querySelector("#wp-admin-bar-preview a")||document.querySelector("#wp-admin-bar-view a")}),[]),(0,l.useEffect)((()=>{e&&t.current&&t.current.setAttribute("href",e)}),[e])})(),null}const V=window.wp.keyboardShortcuts;function G(e=[],t){const s=[...e];for(const e of t){const t=s.findIndex((t=>t.id===e.id));-1!==t?s[t]=e:s.push(e)}return s}const U=(0,d.combineReducers)({isSaving:function(e=!1,t){switch(t.type){case"REQUEST_META_BOX_UPDATES":return!0;case"META_BOX_UPDATES_SUCCESS":case"META_BOX_UPDATES_FAILURE":return!1;default:return e}},locations:function(e={},t){if("SET_META_BOXES_PER_LOCATIONS"===t.type){const s={...e};for(const[e,o]of Object.entries(t.metaBoxesPerLocation))s[e]=G(s[e],o);return s}return e},initialized:function(e=!1,t){return"META_BOXES_INITIALIZED"===t.type||e}}),z=(0,d.combineReducers)({metaBoxes:U}),H=window.wp.apiFetch;var q=e.n(H);const Q=window.wp.hooks,{interfaceStore:$}=D(g.privateApis),W=e=>({registry:t})=>{t.dispatch($).enableComplementaryArea("core",e)},Z=()=>({registry:e})=>e.dispatch($).disableComplementaryArea("core"),X=e=>({registry:t})=>(c()("select( 'core/edit-post' ).openModal( name )",{since:"6.3",alternative:"select( 'core/interface').openModal( name )"}),t.dispatch($).openModal(e)),Y=()=>({registry:e})=>(c()("select( 'core/edit-post' ).closeModal()",{since:"6.3",alternative:"select( 'core/interface').closeModal()"}),e.dispatch($).closeModal()),K=()=>({registry:e})=>{c()("dispatch( 'core/edit-post' ).openPublishSidebar",{since:"6.6",alternative:"dispatch( 'core/editor').openPublishSidebar"}),e.dispatch(g.store).openPublishSidebar()},J=()=>({registry:e})=>{c()("dispatch( 'core/edit-post' ).closePublishSidebar",{since:"6.6",alternative:"dispatch( 'core/editor').closePublishSidebar"}),e.dispatch(g.store).closePublishSidebar()},ee=()=>({registry:e})=>{c()("dispatch( 'core/edit-post' ).togglePublishSidebar",{since:"6.6",alternative:"dispatch( 'core/editor').togglePublishSidebar"}),e.dispatch(g.store).togglePublishSidebar()},te=e=>({registry:t})=>{c()("dispatch( 'core/edit-post' ).toggleEditorPanelEnabled",{since:"6.5",alternative:"dispatch( 'core/editor').toggleEditorPanelEnabled"}),t.dispatch(g.store).toggleEditorPanelEnabled(e)},se=e=>({registry:t})=>{c()("dispatch( 'core/edit-post' ).toggleEditorPanelOpened",{since:"6.5",alternative:"dispatch( 'core/editor').toggleEditorPanelOpened"}),t.dispatch(g.store).toggleEditorPanelOpened(e)},oe=e=>({registry:t})=>{c()("dispatch( 'core/edit-post' ).removeEditorPanel",{since:"6.5",alternative:"dispatch( 'core/editor').removeEditorPanel"}),t.dispatch(g.store).removeEditorPanel(e)},ie=e=>({registry:t})=>t.dispatch(u.store).toggle("core/edit-post",e),re=e=>({registry:t})=>{c()("dispatch( 'core/edit-post' ).switchEditorMode",{since:"6.6",alternative:"dispatch( 'core/editor').switchEditorMode"}),t.dispatch(g.store).switchEditorMode(e)},ne=e=>({registry:t})=>{const s=t.select($).isItemPinned("core",e);t.dispatch($)[s?"unpinItem":"pinItem"]("core",e)};function ae(){return c()("dispatch( 'core/edit-post' ).updatePreferredStyleVariations",{since:"6.6",hint:"Preferred Style Variations are not supported anymore."}),{type:"NOTHING"}}const ce=e=>({registry:t})=>{D(t.dispatch(g.store)).showBlockTypes(e)},le=e=>({registry:t})=>{D(t.dispatch(g.store)).hideBlockTypes(e)};function de(e){return{type:"SET_META_BOXES_PER_LOCATIONS",metaBoxesPerLocation:e}}const ue=()=>async({registry:e,select:t,dispatch:s})=>{s({type:"REQUEST_META_BOX_UPDATES"}),window.tinyMCE&&window.tinyMCE.triggerSave();const o=new window.FormData(document.querySelector(".metabox-base-form")),i=o.get("post_ID"),r=o.get("post_type"),n=e.select(T.store).getEditedEntityRecord("postType",r,i),a=[!!n.comment_status&&["comment_status",n.comment_status],!!n.ping_status&&["ping_status",n.ping_status],!!n.sticky&&["sticky",n.sticky],!!n.author&&["post_author",n.author]].filter(Boolean),c=[o,...t.getActiveMetaBoxLocations().map((e=>new window.FormData((e=>document.querySelector(`.edit-post-meta-boxes-area.is-${e} .metabox-location-${e}`)||document.querySelector("#metaboxes .metabox-location-"+e))(e))))].reduce(((e,t)=>{for(const[s,o]of t)e.append(s,o);return e}),new window.FormData);a.forEach((([e,t])=>c.append(e,t)));try{await q()({url:window._wpMetaBoxUrl,method:"POST",body:c,parse:!1}),s.metaBoxUpdatesSuccess()}catch{s.metaBoxUpdatesFailure()}};function pe(){return{type:"META_BOX_UPDATES_SUCCESS"}}function ge(){return{type:"META_BOX_UPDATES_FAILURE"}}const me=e=>({registry:t})=>{c()("dispatch( 'core/edit-post' ).__experimentalSetPreviewDeviceType",{since:"6.5",version:"6.7",hint:"registry.dispatch( editorStore ).setDeviceType"}),t.dispatch(g.store).setDeviceType(e)},he=e=>({registry:t})=>{c()("dispatch( 'core/edit-post' ).setIsInserterOpened",{since:"6.5",alternative:"dispatch( 'core/editor').setIsInserterOpened"}),t.dispatch(g.store).setIsInserterOpened(e)},we=e=>({registry:t})=>{c()("dispatch( 'core/edit-post' ).setIsListViewOpened",{since:"6.5",alternative:"dispatch( 'core/editor').setIsListViewOpened"}),t.dispatch(g.store).setIsListViewOpened(e)};function ye(){return c()("dispatch( 'core/edit-post' ).setIsEditingTemplate",{since:"6.5",alternative:"dispatch( 'core/editor').setRenderingMode"}),{type:"NOTHING"}}function fe(){return c()("dispatch( 'core/edit-post' ).__unstableCreateTemplate",{since:"6.5"}),{type:"NOTHING"}}let _e=!1;const ve=()=>({registry:e,select:t,dispatch:s})=>{if(!e.select(g.store).__unstableIsEditorReady())return;if(_e)return;const o=e.select(g.store).getCurrentPostType();window.postboxes.page!==o&&window.postboxes.add_postbox_toggles(o),_e=!0,(0,Q.addAction)("editor.savePost","core/edit-post/save-metaboxes",(async(e,o)=>{!o.isAutosave&&t.hasMetaBoxes()&&await s.requestMetaBoxUpdates()})),s({type:"META_BOXES_INITIALIZED"})},be=()=>({registry:e})=>{c()("dispatch( 'core/edit-post' ).toggleDistractionFree",{since:"6.6",alternative:"dispatch( 'core/editor').toggleDistractionFree"}),e.dispatch(g.store).toggleDistractionFree()},xe=(0,d.createRegistrySelector)((e=>()=>{const{id:t,type:s,slug:o}=e(g.store).getCurrentPost(),{getEntityRecord:i,getEntityRecords:r,canUser:n}=e(T.store),a=n("read",{kind:"root",name:"site"})?i("root","site"):void 0;if(+t===a?.page_for_posts)return e(T.store).getDefaultTemplateId({slug:"home"});const c=e(g.store).getEditedPostAttribute("template");if(c){const e=r("postType","wp_template",{per_page:-1})?.find((e=>e.slug===c));return e?e.id:e}let l;return l=o?"page"===s?`${s}-${o}`:`single-${s}-${o}`:"page"===s?"page":`single-${s}`,s?e(T.store).getDefaultTemplateId({slug:l}):void 0})),{interfaceStore:Se}=D(g.privateApis),Pe=[],Ee={},Me=(0,d.createRegistrySelector)((e=>()=>{var t;return null!==(t=e(u.store).get("core","editorMode"))&&void 0!==t?t:"visual"})),Ce=(0,d.createRegistrySelector)((e=>()=>{const t=e(Se).getActiveComplementaryArea("core");return["edit-post/document","edit-post/block"].includes(t)})),Te=(0,d.createRegistrySelector)((e=>()=>{const t=e(Se).getActiveComplementaryArea("core");return!!t&&!["edit-post/document","edit-post/block"].includes(t)})),je=(0,d.createRegistrySelector)((e=>()=>e(Se).getActiveComplementaryArea("core"))),Be=(0,d.createRegistrySelector)((e=>()=>{c()("select( 'core/edit-post' ).getPreferences",{since:"6.0",alternative:"select( 'core/preferences' ).get"});return{...["editorMode","hiddenBlockTypes"].reduce(((t,s)=>{const o=e(u.store).get("core",s);return{...t,[s]:o}}),{}),panels:function(e,t){var s;const o=e?.reduce(((e,t)=>({...e,[t]:{enabled:!1}})),{}),i=t?.reduce(((e,t)=>{const s=e?.[t];return{...e,[t]:{...s,opened:!0}}}),null!=o?o:{});return null!==(s=null!=i?i:o)&&void 0!==s?s:Ee}(e(u.store).get("core","inactivePanels"),e(u.store).get("core","openPanels"))}}));function Ie(e,t,s){c()("select( 'core/edit-post' ).getPreference",{since:"6.0",alternative:"select( 'core/preferences' ).get"});const o=Be(e)[t];return void 0===o?s:o}const ke=(0,d.createRegistrySelector)((e=>()=>{var t;return null!==(t=e(u.store).get("core","hiddenBlockTypes"))&&void 0!==t?t:Pe})),Ae=(0,d.createRegistrySelector)((e=>()=>(c()("select( 'core/edit-post' ).isPublishSidebarOpened",{since:"6.6",alternative:"select( 'core/editor' ).isPublishSidebarOpened"}),e(g.store).isPublishSidebarOpened()))),Re=(0,d.createRegistrySelector)((e=>(t,s)=>(c()("select( 'core/edit-post' ).isEditorPanelRemoved",{since:"6.5",alternative:"select( 'core/editor' ).isEditorPanelRemoved"}),e(g.store).isEditorPanelRemoved(s)))),De=(0,d.createRegistrySelector)((e=>(t,s)=>(c()("select( 'core/edit-post' ).isEditorPanelEnabled",{since:"6.5",alternative:"select( 'core/editor' ).isEditorPanelEnabled"}),e(g.store).isEditorPanelEnabled(s)))),Oe=(0,d.createRegistrySelector)((e=>(t,s)=>(c()("select( 'core/edit-post' ).isEditorPanelOpened",{since:"6.5",alternative:"select( 'core/editor' ).isEditorPanelOpened"}),e(g.store).isEditorPanelOpened(s)))),Le=(0,d.createRegistrySelector)((e=>(t,s)=>(c()("select( 'core/edit-post' ).isModalActive",{since:"6.3",alternative:"select( 'core/interface' ).isModalActive"}),!!e(Se).isModalActive(s)))),Ne=(0,d.createRegistrySelector)((e=>(t,s)=>!!e(u.store).get("core/edit-post",s))),Fe=(0,d.createRegistrySelector)((e=>(t,s)=>e(Se).isItemPinned("core",s))),Ve=(0,d.createSelector)((e=>Object.keys(e.metaBoxes.locations).filter((t=>Ue(e,t)))),(e=>[e.metaBoxes.locations])),Ge=(0,d.createRegistrySelector)((e=>(t,s)=>Ue(t,s)&&ze(t,s)?.some((({id:t})=>e(g.store).isEditorPanelEnabled(`meta-box-${t}`)))));function Ue(e,t){const s=ze(e,t);return!!s&&0!==s.length}function ze(e,t){return e.metaBoxes.locations[t]}const He=(0,d.createSelector)((e=>Object.values(e.metaBoxes.locations).flat()),(e=>[e.metaBoxes.locations]));function qe(e){return Ve(e).length>0}function Qe(e){return e.metaBoxes.isSaving}const $e=(0,d.createRegistrySelector)((e=>()=>(c()("select( 'core/edit-site' ).__experimentalGetPreviewDeviceType",{since:"6.5",version:"6.7",alternative:"select( 'core/editor' ).getDeviceType"}),e(g.store).getDeviceType()))),We=(0,d.createRegistrySelector)((e=>()=>(c()("select( 'core/edit-post' ).isInserterOpened",{since:"6.5",alternative:"select( 'core/editor' ).isInserterOpened"}),e(g.store).isInserterOpened()))),Ze=(0,d.createRegistrySelector)((e=>()=>(c()("select( 'core/edit-post' ).__experimentalGetInsertionPoint",{since:"6.5",version:"6.7"}),D(e(g.store)).getInsertionPoint()))),Xe=(0,d.createRegistrySelector)((e=>()=>(c()("select( 'core/edit-post' ).isListViewOpened",{since:"6.5",alternative:"select( 'core/editor' ).isListViewOpened"}),e(g.store).isListViewOpened()))),Ye=(0,d.createRegistrySelector)((e=>()=>(c()("select( 'core/edit-post' ).isEditingTemplate",{since:"6.5",alternative:"select( 'core/editor' ).getRenderingMode"}),"wp_template"===e(g.store).getCurrentPostType())));function Ke(e){return e.metaBoxes.initialized}const Je=(0,d.createRegistrySelector)((e=>t=>{const s=xe(t);if(s)return e(T.store).getEditedEntityRecord("postType","wp_template",s)})),et=(0,d.createReduxStore)("core/edit-post",{reducer:z,actions:s,selectors:i});(0,d.register)(et),D(et).registerPrivateSelectors(o);const tt=function(){const{toggleFeature:e}=(0,d.useDispatch)(et),{registerShortcut:t}=(0,d.useDispatch)(V.store);return(0,l.useEffect)((()=>{t({name:"core/edit-post/toggle-fullscreen",category:"global",description:(0,f.__)("Toggle fullscreen mode."),keyCombination:{modifier:"secondary",character:"f"}})}),[]),(0,V.useShortcut)("core/edit-post/toggle-fullscreen",(()=>{e("fullscreenMode")})),null};function st(){const{editPost:e}=(0,d.useDispatch)(g.store),[t,s]=(0,l.useState)(!1),[o,i]=(0,l.useState)(void 0),[r,n]=(0,l.useState)(""),{postType:a,isNewPost:c}=(0,d.useSelect)((e=>{const{getEditedPostAttribute:t,isCleanNewPost:s}=e(g.store);return{postType:t("type"),isNewPost:s()}}),[]);return(0,l.useEffect)((()=>{c&&"wp_block"===a&&s(!0)}),[]),"wp_block"===a&&c?(0,v.jsx)(v.Fragment,{children:t&&(0,v.jsx)(j.Modal,{title:(0,f.__)("Create pattern"),onRequestClose:()=>{s(!1)},overlayClassName:"reusable-blocks-menu-items__convert-modal",children:(0,v.jsx)("form",{onSubmit:t=>{t.preventDefault(),s(!1),e({title:r,meta:{wp_pattern_sync_status:o}})},children:(0,v.jsxs)(j.__experimentalVStack,{spacing:"5",children:[(0,v.jsx)(j.TextControl,{label:(0,f.__)("Name"),value:r,onChange:n,placeholder:(0,f.__)("My pattern"),className:"patterns-create-modal__name-input",__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0}),(0,v.jsx)(j.ToggleControl,{__nextHasNoMarginBottom:!0,label:(0,f._x)("Synced","pattern (singular)"),help:(0,f.__)("Sync this pattern across multiple locations."),checked:!o,onChange:()=>{i(o?void 0:"unsynced")}}),(0,v.jsx)(j.__experimentalHStack,{justify:"right",children:(0,v.jsx)(j.Button,{__next40pxDefaultSize:!1,variant:"primary",type:"submit",disabled:!r,accessibleWhenDisabled:!0,children:(0,f.__)("Create")})})]})})})}):null}class ot extends l.Component{constructor(){super(...arguments),this.state={historyId:null}}componentDidUpdate(e){const{postId:t,postStatus:s,hasHistory:o}=this.props,{historyId:i}=this.state;t===e.postId&&t===i||"auto-draft"===s||!t||o||this.setBrowserURL(t)}setBrowserURL(e){window.history.replaceState({id:e},"Post "+e,function(e){return(0,M.addQueryArgs)("post.php",{post:e,action:"edit"})}(e)),this.setState((()=>({historyId:e})))}render(){return null}}const it=(0,d.withSelect)((e=>{const{getCurrentPost:t}=e(g.store),s=t();let{id:o,status:i,type:r}=s;return["wp_template","wp_template_part"].includes(r)&&(o=s.wp_id),{postId:o,postStatus:i}}))(ot),rt=function({location:e}){const t=(0,l.useRef)(null),s=(0,l.useRef)(null);(0,l.useEffect)((()=>(s.current=document.querySelector(".metabox-location-"+e),s.current&&t.current.appendChild(s.current),()=>{s.current&&document.querySelector("#metaboxes").appendChild(s.current)})),[e]);const o=(0,d.useSelect)((e=>e(et).isSavingMetaBoxes()),[]),i=h("edit-post-meta-boxes-area",`is-${e}`,{"is-loading":o});return(0,v.jsxs)("div",{className:i,children:[o&&(0,v.jsx)(j.Spinner,{}),(0,v.jsx)("div",{className:"edit-post-meta-boxes-area__container",ref:t}),(0,v.jsx)("div",{className:"edit-post-meta-boxes-area__clear"})]})};class nt extends l.Component{componentDidMount(){this.updateDOM()}componentDidUpdate(e){this.props.isVisible!==e.isVisible&&this.updateDOM()}updateDOM(){const{id:e,isVisible:t}=this.props,s=document.getElementById(e);s&&(t?s.classList.remove("is-hidden"):s.classList.add("is-hidden"))}render(){return null}}const at=(0,d.withSelect)(((e,{id:t})=>({isVisible:e(g.store).isEditorPanelEnabled(`meta-box-${t}`)})))(nt);function ct({location:e}){const t=(0,d.useSelect)((t=>t(et).getMetaBoxesPerLocation(e)),[e]);return(0,v.jsxs)(v.Fragment,{children:[(null!=t?t:[]).map((({id:e})=>(0,v.jsx)(at,{id:e},e))),(0,v.jsx)(rt,{location:e})]})}const lt=window.wp.keycodes,dt=function(){const e=(0,d.useSelect)((e=>{const{canUser:t}=e(T.store),s=(0,M.addQueryArgs)("edit.php",{post_type:"wp_block"}),o=(0,M.addQueryArgs)("site-editor.php",{path:"/patterns"});return t("create",{kind:"postType",name:"wp_template"})?o:s}),[]);return(0,v.jsx)(j.MenuItem,{role:"menuitem",href:e,children:(0,f.__)("Manage patterns")})};function ut(){const e=(0,d.useSelect)((e=>"wp_template"===e(g.store).getCurrentPostType()),[]);return(0,v.jsx)(u.PreferenceToggleMenuItem,{scope:"core/edit-post",name:e?"welcomeGuideTemplate":"welcomeGuide",label:(0,f.__)("Welcome Guide")})}const{PreferenceBaseOption:pt}=D(u.privateApis);function gt({willEnable:e}){const[t,s]=(0,l.useState)(!1);return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("p",{className:"edit-post-preferences-modal__custom-fields-confirmation-message",children:(0,f.__)("A page reload is required for this change. Make sure your content is saved before reloading.")}),(0,v.jsx)(j.Button,{__next40pxDefaultSize:!1,className:"edit-post-preferences-modal__custom-fields-confirmation-button",variant:"secondary",isBusy:t,accessibleWhenDisabled:!0,disabled:t,onClick:()=>{s(!0),function(){const e=document.getElementById("toggle-custom-fields-form");e.querySelector('[name="_wp_http_referer"]').setAttribute("value",(0,M.getPathAndQueryString)(window.location.href)),e.submit()}()},children:e?(0,f.__)("Show & Reload Page"):(0,f.__)("Hide & Reload Page")})]})}const mt=(0,d.withSelect)((e=>({areCustomFieldsEnabled:!!e(g.store).getEditorSettings().enableCustomFields})))((function({label:e,areCustomFieldsEnabled:t}){const[s,o]=(0,l.useState)(t);return(0,v.jsx)(pt,{label:e,isChecked:s,onChange:o,children:s!==t&&(0,v.jsx)(gt,{willEnable:s})})})),{PreferenceBaseOption:ht}=D(u.privateApis),wt=(0,B.compose)((0,d.withSelect)(((e,{panelName:t})=>{const{isEditorPanelEnabled:s,isEditorPanelRemoved:o}=e(g.store);return{isRemoved:o(t),isChecked:s(t)}})),(0,B.ifCondition)((({isRemoved:e})=>!e)),(0,d.withDispatch)(((e,{panelName:t})=>({onChange:()=>e(g.store).toggleEditorPanelEnabled(t)}))))(ht),{PreferencesModalSection:yt}=D(u.privateApis),ft=(0,d.withSelect)((e=>{const{getEditorSettings:t}=e(g.store),{getAllMetaBoxes:s}=e(et);return{areCustomFieldsRegistered:void 0!==t().enableCustomFields,metaBoxes:s()}}))((function({areCustomFieldsRegistered:e,metaBoxes:t,...s}){const o=t.filter((({id:e})=>"postcustom"!==e));return e||0!==o.length?(0,v.jsxs)(yt,{...s,children:[e&&(0,v.jsx)(mt,{label:(0,f.__)("Custom fields")}),o.map((({id:e,title:t})=>(0,v.jsx)(wt,{label:t,panelName:`meta-box-${e}`},e)))]}):null})),{PreferenceToggleControl:_t}=D(u.privateApis),{PreferencesModal:vt}=D(g.privateApis);function bt(){const e={general:(0,v.jsx)(ft,{title:(0,f.__)("Advanced")}),appearance:(0,v.jsx)(_t,{scope:"core/edit-post",featureName:"themeStyles",help:(0,f.__)("Make the editor look like your theme."),label:(0,f.__)("Use theme styles")})};return(0,v.jsx)(vt,{extraSections:e})}const{ToolsMoreMenuGroup:xt,ViewMoreMenuGroup:St}=D(g.privateApis),Pt=()=>{const e=(0,B.useViewportMatch)("large");return(0,v.jsxs)(v.Fragment,{children:[e&&(0,v.jsx)(St,{children:(0,v.jsx)(u.PreferenceToggleMenuItem,{scope:"core/edit-post",name:"fullscreenMode",label:(0,f.__)("Fullscreen mode"),info:(0,f.__)("Show and hide the admin user interface"),messageActivated:(0,f.__)("Fullscreen mode activated"),messageDeactivated:(0,f.__)("Fullscreen mode deactivated"),shortcut:lt.displayShortcut.secondary("f")})}),(0,v.jsxs)(xt,{children:[(0,v.jsx)(dt,{}),(0,v.jsx)(ut,{})]}),(0,v.jsx)(bt,{})]})};function Et({nonAnimatedSrc:e,animatedSrc:t}){return(0,v.jsxs)("picture",{className:"edit-post-welcome-guide__image",children:[(0,v.jsx)("source",{srcSet:e,media:"(prefers-reduced-motion: reduce)"}),(0,v.jsx)("img",{src:t,width:"312",height:"240",alt:""})]})}function Mt(){const{toggleFeature:e}=(0,d.useDispatch)(et);return(0,v.jsx)(j.Guide,{className:"edit-post-welcome-guide",contentLabel:(0,f.__)("Welcome to the block editor"),finishButtonText:(0,f.__)("Get started"),onFinish:()=>e("welcomeGuide"),pages:[{image:(0,v.jsx)(Et,{nonAnimatedSrc:"https://wsrv.nl/?url=https://raw.githubusercontent.com/retraceur/ressources/refs/heads/main/images/welcome-canvas.svg",animatedSrc:"https://wsrv.nl/?url=https://raw.githubusercontent.com/retraceur/ressources/refs/heads/main/images/welcome-canvas.svg"}),content:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("h1",{className:"edit-post-welcome-guide__heading",children:(0,f.__)("Welcome to the block editor")}),(0,v.jsx)("p",{className:"edit-post-welcome-guide__text",children:(0,f.__)("In the Retraceur editor, each paragraph, image, or video is presented as a distinct “block” of content.")})]})},{image:(0,v.jsx)(Et,{nonAnimatedSrc:"https://wsrv.nl/?url=https://raw.githubusercontent.com/retraceur/ressources/refs/heads/main/images/welcome-editor.svg",animatedSrc:"https://wsrv.nl/?url=https://raw.githubusercontent.com/retraceur/ressources/refs/heads/main/images/welcome-editor.svg"}),content:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("h1",{className:"edit-post-welcome-guide__heading",children:(0,f.__)("Make each block your own")}),(0,v.jsx)("p",{className:"edit-post-welcome-guide__text",children:(0,f.__)("Each block comes with its own set of controls for changing things like color, width, and alignment. These will show and hide automatically when you have a block selected.")})]})},{image:(0,v.jsx)(Et,{nonAnimatedSrc:"https://wsrv.nl/?url=https://raw.githubusercontent.com/retraceur/ressources/refs/heads/main/images/welcome-library.svg",animatedSrc:"https://wsrv.nl/?url=https://raw.githubusercontent.com/retraceur/ressources/refs/heads/main/images/welcome-library.svg"}),content:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("h1",{className:"edit-post-welcome-guide__heading",children:(0,f.__)("Get to know the block library")}),(0,v.jsx)("p",{className:"edit-post-welcome-guide__text",children:(0,l.createInterpolateElement)((0,f.__)("All of the blocks available to you live in the block library. You’ll find it wherever you see the <InserterIconImage /> icon."),{InserterIconImage:(0,v.jsx)("img",{alt:(0,f.__)("inserter"),src:"data:image/svg+xml,%3Csvg width='18' height='18' viewBox='0 0 18 18' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='18' height='18' rx='2' fill='%231E1E1E'/%3E%3Cpath d='M9.22727 4V14M4 8.77273H14' stroke='white' stroke-width='1.5'/%3E%3C/svg%3E%0A"})})})]})}]})}function Ct(){const{toggleFeature:e}=(0,d.useDispatch)(et);return(0,v.jsx)(j.Guide,{className:"edit-template-welcome-guide",contentLabel:(0,f.__)("Welcome to the template editor"),finishButtonText:(0,f.__)("Get started"),onFinish:()=>e("welcomeGuideTemplate"),pages:[{image:(0,v.jsx)(Et,{nonAnimatedSrc:"https://wsrv.nl/?url=https://raw.githubusercontent.com/retraceur/ressources/refs/heads/main/images/welcome-template-editor.svg",animatedSrc:"https://wsrv.nl/?url=https://raw.githubusercontent.com/retraceur/ressources/refs/heads/main/images/welcome-template-editor.svg"}),content:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("h1",{className:"edit-post-welcome-guide__heading",children:(0,f.__)("Welcome to the template editor")}),(0,v.jsx)("p",{className:"edit-post-welcome-guide__text",children:(0,f.__)("Templates help define the layout of the site. You can customize all aspects of your posts and pages using blocks and patterns in this editor.")})]})}]})}function Tt({postType:e}){const{isActive:t,isEditingTemplate:s}=(0,d.useSelect)((t=>{const{isFeatureActive:s}=t(et),o="wp_template"===e;return{isActive:s(o?"welcomeGuideTemplate":"welcomeGuide"),isEditingTemplate:o}}),[e]);return t?s?(0,v.jsx)(Ct,{}):(0,v.jsx)(Mt,{}):null}const jt=(0,v.jsx)(_.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,v.jsx)(_.Path,{d:"M6 4a2 2 0 0 0-2 2v3h1.5V6a.5.5 0 0 1 .5-.5h3V4H6Zm3 14.5H6a.5.5 0 0 1-.5-.5v-3H4v3a2 2 0 0 0 2 2h3v-1.5Zm6 1.5v-1.5h3a.5.5 0 0 0 .5-.5v-3H20v3a2 2 0 0 1-2 2h-3Zm3-16a2 2 0 0 1 2 2v3h-1.5V6a.5.5 0 0 0-.5-.5h-3V4h3Z"})}),{getLayoutStyles:Bt}=D(w.privateApis),{useCommands:It}=D(E.privateApis),{useCommandContext:kt}=D(P.privateApis),{Editor:At,FullscreenMode:Rt,NavigableRegion:Dt}=D(g.privateApis),{BlockKeyboardShortcuts:Ot}=D(n.privateApis),Lt=["wp_template","wp_template_part","wp_block","wp_navigation"];function Nt({isLegacy:e}){const[t,s,o]=(0,d.useSelect)((e=>{const{get:t}=e(u.store),{isMetaBoxLocationVisible:s}=e(et);return[t("core/edit-post","metaBoxesMainIsOpen"),t("core/edit-post","metaBoxesMainOpenHeight"),s("normal")||s("advanced")||s("side")]}),[]),{set:i}=(0,d.useDispatch)(u.store),r=(0,l.useRef)(),n=(0,B.useMediaQuery)("(max-height: 549px)"),[{min:a,max:c},p]=(0,l.useState)((()=>({}))),g=(0,B.useRefEffect)((e=>{const t=e.closest(".interface-interface-skeleton__content"),s=t.querySelectorAll(":scope > .components-notice-list"),o=t.querySelector(".edit-post-meta-boxes-main__presenter"),i=new window.ResizeObserver((()=>{let e=t.offsetHeight;for(const t of s)e-=t.offsetHeight;const i=o.offsetHeight;p({min:i,max:e})}));i.observe(t);for(const e of s)i.observe(e);return()=>i.disconnect()}),[]),m=(0,l.useRef)(),w=(0,l.useId)(),[y,_]=(0,l.useState)(!0),S=(e,t,s)=>{const o=Math.min(c,Math.max(a,e));t?i("core/edit-post","metaBoxesMainOpenHeight",o):m.current.ariaValueNow=C(o),s&&r.current.updateSize({height:o,width:"auto"})};if(!o)return;const P=(0,v.jsxs)("div",{className:h("edit-post-layout__metaboxes",!e&&"edit-post-meta-boxes-main__liner"),hidden:!e&&n&&!t,children:[(0,v.jsx)(ct,{location:"normal"}),(0,v.jsx)(ct,{location:"advanced"})]});if(e)return P;const E=void 0===s;let M="50%";void 0!==c&&(M=E&&y?c/2:c);const C=e=>Math.round((e-a)/(c-a)*100),T=void 0===c||E?50:C(s),I="edit-post-meta-boxes-main",k=(0,f.__)("Meta Boxes");let A,R;return n?(A=Dt,R={className:h(I,"is-toggle-only")}):(A=j.ResizableBox,R={as:Dt,ref:r,className:h(I,"is-resizable"),defaultSize:{height:s},minHeight:a,maxHeight:M,enable:{top:!0,right:!1,bottom:!1,left:!1,topLeft:!1,topRight:!1,bottomRight:!1,bottomLeft:!1},handleClasses:{top:"edit-post-meta-boxes-main__presenter"},handleComponent:{top:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(j.Tooltip,{text:(0,f.__)("Drag to resize"),children:(0,v.jsx)("button",{ref:m,role:"separator","aria-valuenow":T,"aria-label":(0,f.__)("Drag to resize"),"aria-describedby":w,onKeyDown:e=>{const t={ArrowUp:20,ArrowDown:-20}[e.key];if(t){const o=r.current.resizable,i=E?o.offsetHeight:s;S(t+i,!0,!0),e.preventDefault()}}})}),(0,v.jsx)(j.VisuallyHidden,{id:w,children:(0,f.__)("Use up and down arrow keys to resize the meta box panel.")})]})},onPointerDown:({pointerId:e,target:t})=>{t.setPointerCapture(e)},onResizeStart:(e,t,s)=>{E&&(S(s.offsetHeight,!1,!0),_(!1))},onResize:()=>S(r.current.state.height),onResizeStop:()=>S(r.current.state.height,!0)}),(0,v.jsxs)(A,{"aria-label":k,...R,children:[n?(0,v.jsxs)("button",{"aria-expanded":t,className:"edit-post-meta-boxes-main__presenter",onClick:()=>i("core/edit-post","metaBoxesMainIsOpen",!t),children:[k,(0,v.jsx)(j.Icon,{icon:t?b:x})]}):(0,v.jsx)("meta",{ref:g}),P]})}const Ft=function({postId:e,postType:t,settings:s,initialEdits:o}){It(),function(){const{isFullscreen:e}=(0,d.useSelect)((e=>{const{get:t}=e(u.store);return{isFullscreen:t("core/edit-post","fullscreenMode")}}),[]),{toggle:t}=(0,d.useDispatch)(u.store),{createInfoNotice:s}=(0,d.useDispatch)(S.store);(0,P.useCommand)({name:"core/toggle-fullscreen-mode",label:e?(0,f.__)("Exit fullscreen"):(0,f.__)("Enter fullscreen"),icon:jt,callback:({close:o})=>{t("core/edit-post","fullscreenMode"),o(),s(e?(0,f.__)("Fullscreen off."):(0,f.__)("Fullscreen on."),{id:"core/edit-post/toggle-fullscreen-mode/notice",type:"snackbar",actions:[{label:(0,f.__)("Undo"),onClick:()=>{t("core/edit-post","fullscreenMode")}}]})}})}();const i=function(){const e=(0,d.useRegistry)();return(0,B.useRefEffect)((t=>{function s(s){if(s.target!==t&&s.target!==t.parentElement)return;const{ownerDocument:o}=t,{defaultView:i}=o;if(!i.parseInt(i.getComputedStyle(t,":after").height,10))return;const n=t.lastElementChild;if(!n)return;const a=n.getBoundingClientRect();if(s.clientY<a.bottom)return;s.preventDefault();const c=e.select(w.store).getBlockOrder(""),l=c[c.length-1],d=e.select(w.store).getBlock(l),{selectBlock:u,insertDefaultBlock:p}=e.dispatch(w.store);d&&(0,r.isUnmodifiedDefaultBlock)(d)?u(l):p()}const{ownerDocument:o}=t;return o.addEventListener("mousedown",s),()=>{o.removeEventListener("mousedown",s)}}),[e])}(),n=function(){const{isBlockBasedTheme:e,hasV3BlocksOnly:t,isEditingTemplate:s,isZoomOutMode:o}=(0,d.useSelect)((e=>{const{getEditorSettings:t,getCurrentPostType:s}=e(g.store),{__unstableGetEditorMode:o}=e(w.store),{getBlockTypes:i}=e(r.store);return{isBlockBasedTheme:t().__unstableIsBlockBasedTheme,hasV3BlocksOnly:i().every((e=>e.apiVersion>=3)),isEditingTemplate:"wp_template"===s(),isZoomOutMode:"zoom-out"===o()}}),[]);return t||s||o}(),{createErrorNotice:a}=(0,d.useDispatch)(S.store),{currentPost:{postId:c,postType:p},onNavigateToEntityRecord:m,onNavigateToPreviousEntityRecord:_}=function(e,t,s){const[o,i]=(0,l.useReducer)(((e,{type:t,post:s,previousRenderingMode:o})=>"push"===t?[...e,{post:s,previousRenderingMode:o}]:"pop"===t&&e.length>1?e.slice(0,-1):e),[{post:{postId:e,postType:t}}]),{post:r,previousRenderingMode:n}=o[o.length-1],{getRenderingMode:a}=(0,d.useSelect)(g.store),{setRenderingMode:c}=(0,d.useDispatch)(g.store),u=(0,l.useCallback)((e=>{i({type:"push",post:{postId:e.postId,postType:e.postType},previousRenderingMode:a()}),c(s)}),[a,c,s]),p=(0,l.useCallback)((()=>{i({type:"pop"}),n&&c(n)}),[c,n]);return{currentPost:r,onNavigateToEntityRecord:u,onNavigateToPreviousEntityRecord:o.length>1?p:void 0}}(e,t,"post-only"),b="wp_template"===p,{mode:x,isFullscreenActive:E,hasActiveMetaboxes:I,hasBlockSelected:k,showIconLabels:A,isDistractionFree:R,showMetaBoxes:O,hasHistory:L,isWelcomeGuideVisible:V,templateId:G,isDevicePreview:U}=(0,d.useSelect)((e=>{var t;const{get:o}=e(u.store),{isFeatureActive:i,getEditedPostTemplateId:r}=D(e(et)),{canUser:n,getPostType:a}=e(T.store),{getDeviceType:c,getEditorMode:l}=e(g.store),{__unstableGetEditorMode:d}=D(e(w.store)),m=s.supportsTemplateMode,h=null!==(t=a(p)?.viewable)&&void 0!==t&&t,y=n("read",{kind:"postType",name:"wp_template"}),f="zoom-out"===d();return{mode:l(),isFullscreenActive:e(et).isFeatureActive("fullscreenMode"),hasActiveMetaboxes:e(et).hasMetaBoxes(),hasBlockSelected:!!e(w.store).getBlockSelectionStart(),showIconLabels:o("core","showIconLabels"),isDistractionFree:o("core","distractionFree"),showMetaBoxes:!Lt.includes(p)&&!f,isWelcomeGuideVisible:i("welcomeGuide"),templateId:m&&h&&y&&!b?r():null,isDevicePreview:"Desktop"!==c()}}),[p,b,s.supportsTemplateMode]);(e=>{const t=(0,d.useSelect)((t=>e&&t(g.store).__unstableIsEditorReady()),[e]),{initializeMetaBoxes:s}=(0,d.useDispatch)(et);(0,l.useEffect)((()=>{t&&s()}),[t,s])})(I),kt(k?"block-selection-edit":"entity-edit");const z=(0,l.useMemo)((()=>({...s,onNavigateToEntityRecord:m,onNavigateToPreviousEntityRecord:_,defaultRenderingMode:"post-only"})),[s,m,_]),H=function(){const{hasThemeStyleSupport:e,editorSettings:t,isZoomedOutView:s,renderingMode:o,postType:i}=(0,d.useSelect)((e=>{const{__unstableGetEditorMode:t}=e(w.store),{getCurrentPostType:s,getRenderingMode:o}=e(g.store),i=s();return{hasThemeStyleSupport:e(et).isFeatureActive("themeStyles"),editorSettings:e(g.store).getEditorSettings(),isZoomedOutView:"zoom-out"===t(),renderingMode:o(),postType:i}}),[]);return(0,l.useMemo)((()=>{var r,n,a,c;const l=null!==(r=t.styles?.filter((e=>e.__unstableType&&"theme"!==e.__unstableType)))&&void 0!==r?r:[],d=[...null!==(n=t?.defaultEditorStyles)&&void 0!==n?n:[],...l],u=e&&l.length!==(null!==(a=t.styles?.length)&&void 0!==a?a:0);t.disableLayoutStyles||u||d.push({css:Bt({style:{},selector:"body",hasBlockGapSupport:!1,hasFallbackGapSupport:!0,fallbackGapValue:"0.5em"})});const p=u?null!==(c=t.styles)&&void 0!==c?c:[]:d;return s||"post-only"!==o||Lt.includes(i)?p:[...p,{css:':root :where(.editor-styles-wrapper)::after {content: ""; display: block; height: 40vh;}'}]}),[t.defaultEditorStyles,t.disableLayoutStyles,t.styles,e,i])}();A?document.body.classList.add("show-icon-labels"):document.body.classList.remove("show-icon-labels");const q=(0,j.__unstableUseNavigateRegions)(),Q=h("edit-post-layout","is-mode-"+x,{"has-metaboxes":I}),{createSuccessNotice:$}=(0,d.useDispatch)(S.store),W=(0,l.useCallback)(((e,t)=>{switch(e){case"move-to-trash":document.location.href=(0,M.addQueryArgs)("edit.php",{trashed:1,post_type:t[0].type,ids:t[0].id});break;case"duplicate-post":{const e=t[0],s="string"==typeof e.title?e.title:e.title?.rendered;$((0,f.sprintf)(
// translators: %s: Title of the created post or template, e.g: "Hello world".
// translators: %s: Title of the created post or template, e.g: "Hello world".
(0,f.__)('"%s" successfully created.'),(0,C.decodeEntities)(s)),{type:"snackbar",id:"duplicate-post-action",actions:[{label:(0,f.__)("Edit"),onClick:()=>{const t=e.id;document.location.href=(0,M.addQueryArgs)("post.php",{post:t,action:"edit"})}}]})}}}),[$]),Z=(0,l.useMemo)((()=>({type:t,id:e})),[t,e]),X=(0,B.useViewportMatch)("medium")&&E?(0,v.jsx)(N,{initialPost:Z}):null;return(0,v.jsx)(j.SlotFillProvider,{children:(0,v.jsxs)(g.ErrorBoundary,{children:[(0,v.jsx)(P.CommandMenu,{}),(0,v.jsx)(Tt,{postType:p}),(0,v.jsx)("div",{className:q.className,...q,ref:q.ref,children:(0,v.jsxs)(At,{settings:z,initialEdits:o,postType:p,postId:c,templateId:G,className:Q,styles:H,forceIsDirty:I,contentRef:i,disableIframe:!n,autoFocus:!V,onActionPerformed:W,extraSidebarPanels:O&&(0,v.jsx)(ct,{location:"side"}),extraContent:!R&&O&&(0,v.jsx)(Nt,{isLegacy:!n||U}),children:[(0,v.jsx)(g.PostLockedModal,{}),(0,v.jsx)(F,{}),(0,v.jsx)(Rt,{isActive:E}),(0,v.jsx)(it,{hasHistory:L}),(0,v.jsx)(g.UnsavedChangesWarning,{}),(0,v.jsx)(g.AutosaveMonitor,{}),(0,v.jsx)(g.LocalAutosaveMonitor,{}),(0,v.jsx)(tt,{}),(0,v.jsx)(g.EditorKeyboardShortcutsRegister,{}),(0,v.jsx)(Ot,{}),(0,v.jsx)(st,{}),(0,v.jsx)(y.PluginArea,{onError:function(e){a((0,f.sprintf)(/* translators: %s: plugin name */ /* translators: %s: plugin name */
(0,f.__)('The "%s" plugin has encountered an error and cannot be rendered.'),e))}}),(0,v.jsx)(Pt,{}),X,(0,v.jsx)(g.EditorSnackbars,{})]})})]})})},{PluginPostExcerpt:Vt}=D(g.privateApis),Gt=(0,M.getPath)(window.location.href)?.includes("site-editor.php"),Ut=e=>{c()(`wp.editPost.${e}`,{since:"6.6",alternative:`wp.editor.${e}`})};function zt(e){return Gt?null:(Ut("PluginBlockSettingsMenuItem"),(0,v.jsx)(g.PluginBlockSettingsMenuItem,{...e}))}function Ht(e){return Gt?null:(Ut("PluginDocumentSettingPanel"),(0,v.jsx)(g.PluginDocumentSettingPanel,{...e}))}function qt(e){return Gt?null:(Ut("PluginMoreMenuItem"),(0,v.jsx)(g.PluginMoreMenuItem,{...e}))}function Qt(e){return Gt?null:(Ut("PluginPrePublishPanel"),(0,v.jsx)(g.PluginPrePublishPanel,{...e}))}function $t(e){return Gt?null:(Ut("PluginPostPublishPanel"),(0,v.jsx)(g.PluginPostPublishPanel,{...e}))}function Wt(e){return Gt?null:(Ut("PluginPostStatusInfo"),(0,v.jsx)(g.PluginPostStatusInfo,{...e}))}function Zt(e){return Gt?null:(Ut("PluginSidebar"),(0,v.jsx)(g.PluginSidebar,{...e}))}function Xt(e){return Gt?null:(Ut("PluginSidebarMoreMenuItem"),(0,v.jsx)(g.PluginSidebarMoreMenuItem,{...e}))}function Yt(){return Gt?null:(c()("wp.editPost.__experimentalPluginPostExcerpt",{since:"6.6",hint:"Core and custom panels can be access programmatically using their panel name."}),Vt)}const{BackButton:Kt,registerCoreBlockBindingsSources:Jt}=D(g.privateApis);function es(e,t,s,o,i){const a=window.matchMedia("(min-width: 782px)").matches,c=document.getElementById(e),m=(0,l.createRoot)(c);return(0,d.dispatch)(u.store).setDefaults("core/edit-post",{fullscreenMode:!0,themeStyles:!0,welcomeGuide:!0,welcomeGuideTemplate:!0}),(0,d.dispatch)(u.store).setDefaults("core",{allowRightClickOverrides:!0,editorMode:"visual",fixedToolbar:!1,hiddenBlockTypes:[],inactivePanels:[],openPanels:["post-status"],showBlockBreadcrumbs:!0,showIconLabels:!1,showListViewByDefault:!1,enableChoosePatternModal:!0,isPublishSidebarEnabled:!0}),window.__experimentalMediaProcessing&&(0,d.dispatch)(u.store).setDefaults("core/media",{requireApproval:!0,optimizeOnUpload:!0}),(0,d.dispatch)(r.store).reapplyBlockTypeFilters(),a&&(0,d.select)(u.store).get("core","showListViewByDefault")&&!(0,d.select)(u.store).get("core","distractionFree")&&(0,d.dispatch)(g.store).setIsListViewOpened(!0),(0,n.registerCoreBlocks)(),Jt(),(0,p.registerLegacyWidgetBlock)({inserter:!1}),(0,p.registerWidgetGroupBlock)({inserter:!1}),"Standards"!=("CSS1Compat"===document.compatMode?"Standards":"Quirks")&&console.warn("Your browser is using Quirks Mode. \nThis can cause rendering issues such as blocks overlaying meta boxes in the editor. Quirks Mode can be triggered by PHP errors or HTML code appearing before the opening <!DOCTYPE html>. Try checking the raw page source or your site's PHP error log and resolving errors there, removing any HTML before the doctype, or disabling plugins."),-1!==window.navigator.userAgent.indexOf("iPhone")&&window.addEventListener("scroll",(e=>{const t=document.getElementsByClassName("interface-interface-skeleton__body")[0];e.target===document&&(window.scrollY>100&&(t.scrollTop=t.scrollTop+window.scrollY),document.getElementsByClassName("is-mode-visual")[0]&&window.scrollTo(0,0))})),window.addEventListener("dragover",(e=>e.preventDefault()),!1),window.addEventListener("drop",(e=>e.preventDefault()),!1),m.render((0,v.jsx)(l.StrictMode,{children:(0,v.jsx)(Ft,{settings:o,postId:s,postType:t,initialEdits:i})})),m}function ts(){c()("wp.editPost.reinitializeEditor",{since:"6.2",version:"6.3"})}(window.wp=window.wp||{}).editPost=t})();